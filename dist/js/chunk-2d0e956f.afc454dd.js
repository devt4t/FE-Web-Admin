(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e956f"],{"8cb0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-card",{staticClass:"rounded-xl elevation-0 overflow-hidden"},[r("v-card-text",{staticClass:"pa-0",staticStyle:{position:"relative"}},[e.maps.loading.show?r("v-overlay",{attrs:{absolute:"","justify-center":"","align-center":""}},[r("div",{staticClass:"d-flex flex-column align-center justify-center"},[r("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),r("p",{staticClass:"mb-0 text-center mt-4"},[e._v(e._s(e.maps.loading.text||"Loading..."))])],1)]):e._e(),r("div",{staticClass:"overflow-hidden rounded-xl",staticStyle:{position:"relative"},attrs:{id:"mapboxWrapper","data-aos":"fade-down"}},[r("div",{staticStyle:{position:"absolute",top:"10px",left:"10px","z-index":"2"}},[r("v-menu",{attrs:{transition:"slide-y-transition",bottom:"","content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.attrs,n=t.on;return[r("div",e._g(e._b({},"div",a,!1),n),[r("v-btn",{staticStyle:{position:"relative","z-index":"3"},attrs:{"data-aos":"zoom-in","data-aos-delay":"500",fab:"",small:""}},[r("v-icon",[e._v("mdi-layers-triple")])],1),null!==e.layers.selected?r("v-chip",{key:e.layers.key,staticClass:"pl-7 white--text",staticStyle:{transform:"translateX(-20px)","z-index":"2",cursor:"pointer","background-color":"#00000099"},attrs:{"data-aos":"fade-right","data-aos-delay":"700"}},[e._v(e._s(e.layers.items[e.layers.selected].text||"-")+" "),r("v-icon",{staticClass:"ml-1 white--text"},[e._v(e._s(e.layers.items[e.layers.selected].icon))])],1):e._e()],1)]}}])},[r("v-card",[r("v-card-text",{staticClass:"pa-2"},e._l(e.layers.items,(function(t,a){return r("v-btn",{key:"layer"+a,attrs:{text:"",block:"",rounded:""},on:{click:function(){return e.layers.selected=a}}},[r("v-icon",{staticClass:"mr-1"},[e._v(e._s(t.icon))]),e._v(" "+e._s(t.text)+" ")],1)})),1)],1)],1)],1),r("div",{key:e.maps.key,ref:"mapbox",staticClass:"rounded-xl overflow-hidden",staticStyle:{height:"300px",width:"100%"},attrs:{id:"DetailModalMapBoxContainer"}}),e.fileNotFound?r("div",{staticClass:"d-flex flex-column justify-center align-center grey lighten-3",staticStyle:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0"}},[r("v-icon",{attrs:{size:"60"}},[e._v("mdi-file-document-remove")]),e._v(" File data polygon tidak ditemukan ")],1):e._e()])],1)],1)],1)},n=[],o=r("1da1"),s=(r("99af"),r("cb29"),r("d81d"),r("96cf"),r("bc3a"),r("3d20")),l=r.n(s),i={props:{data:{type:Object,default:{village_polygon:null,dry_land_polygon:null}}},data:function(){return{maps:{accessToken:"",mapStyle:"",model:null,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',center:[113.9213,-.7893],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",legends:{model:""},listMarker:[],loading:{show:!1,text:"Loading..."},zoom:3,geojson:{},key:111,layerId:0,hoveredStateId:0,layerStyle:{outline:{color:"#000000"},fill:{color:"#f06800"}},popup:{model:!1,content:{title:"",description:""}}},layers:{selected:null,key:229290021,items:[{key:"village_polygon",text:"Desa",icon:"mdi-home",url:""},{key:"dry_land_polygon",text:"Lahan Kering",icon:"mdi-land-plots-circle",url:""}]}}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.maps.accessToken=e.$store.state.maps.accessToken,e.maps.mapStyle=e.$store.state.maps.mapStyle,e.showPolygonData;case 3:case"end":return t.stop()}}),t)})))()},computed:{showPolygonData:function(){var e=this.data,t=0;return this.layers.selected=null,e.village_polygon?(t+=1,this.layers.items[0].url=e.village_polygon,this.layers.selected=0):this.layers.items[0].url=null,e.dry_land_polygon?(t+=1,this.layers.items[1].url=e.dry_land_polygon,1===t&&(this.layers.selected=1)):this.layers.items[1].url=null,t>0},fileNotFound:function(){var e=this.layers.selected;return 0==this.showPolygonData||null!==e&&!this.layers.items[e].url}},watch:{"layers.selected":{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.layers.key+=1,null===e){r.next=4;break}return r.next=4,t.getPolygonData(e);case 4:case"end":return r.stop()}}),r)})))()}}},methods:{errorResponse:function(e){console.log(e),e.response&&(e.response.status?401==e.response.status?(localStorage.removeItem("token"),this.$router.push("/")):l.a.fire({title:"Error!",text:"".concat(e.response.message),icon:"error",confirmButtonColor:"#f44336"}):l.a.fire({title:"Error!",text:"".concat(e.message),icon:"error",confirmButtonColor:"#f44336"}))},getPolygonData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s,i,c,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,a=t.maps,n=t.layers.items,mapboxgl.accessToken=a.accessToken,mapboxgl.supported()){r.next=8;break}l.a.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"}),r.next=19;break;case 8:if(!n[e].url){r.next=19;break}return a.loading.show=!0,s="".concat(t.$store.state.apiUrlImage).concat(n[e].url),i=a.layerId,c=a.layerStyle,u=t._utils.generateRandomString(5)+Date.now(),c.fill.color=t._utils.getRandomColor(),a.loading.text="Getting polygon data...",r.next=18,omnivore.kml(s).on("ready",Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.toGeoJSON();case 2:return t=e.sent,e.next=5,t.features.map((function(e,t){e.id=i+=1}));case 5:if(0!==t.features.length){e.next=13;break}return e.next=8,!1;case 8:return a.loading.show=e.sent,e.next=11,l.a.fire({title:"Error!",text:"Polygon Features is 0.",icon:"error",confirmButtonColor:"#f44336"});case 11:e.next=25;break;case 13:return a.loading.text="Initialize map...",e.next=16,new mapboxgl.Map({container:"DetailModalMapBoxContainer",style:a.mapStyle,center:a.center,zoom:a.zoom,projection:"globe"});case 16:return r=e.sent,e.next=19,r.dragRotate.disable();case 19:return e.next=21,r.touchZoomRotate.disableRotation();case 21:return e.next=23,r.addControl(new mapboxgl.FullscreenControl);case 23:return e.next=25,r.on("load",Object(o["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6});case 2:return e.next=4,r.addControl(new mapboxgl.NavigationControl);case 4:return e.next=6,r.addSource(u,{type:"geojson",data:t});case 6:return e.next=8,r.addLayer({id:"".concat(u,"-fills"),type:"fill",source:u,layout:{},paint:{"fill-color":c.fill.color,"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.1,.5]}});case 8:return e.next=10,r.addLayer({id:"".concat(u,"-outline"),type:"line",source:u,layout:{},paint:{"line-color":c.outline.color,"line-width":2}});case 10:return n=turf.center(t),o=n.geometry.coordinates,e.next=14,r.flyTo({center:[o[0],o[1]],zoom:11,duration:7e3});case 14:return e.next=16,!1;case 16:a.loading.show=e.sent;case 17:case"end":return e.stop()}}),e)}))));case 25:case"end":return e.stop()}}),e)}))));case 18:d=r.sent;case 19:r.next=24;break;case 21:r.prev=21,r.t0=r["catch"](0),t.errorResponse(r.t0);case 24:return r.prev=24,r.finish(24);case 26:case"end":return r.stop()}}),r,null,[[0,21,24,26]])})))()}}},c=i,u=r("2877"),d=r("6544"),p=r.n(d),y=r("8336"),m=r("b0af"),g=r("99d9"),f=r("cc20"),x=r("132d"),h=r("e449"),v=r("a797"),b=r("490a"),w=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=w.exports;p()(w,{VBtn:y["a"],VCard:m["a"],VCardText:g["c"],VChip:f["a"],VIcon:x["a"],VMenu:h["a"],VOverlay:v["a"],VProgressCircular:b["a"]})}}]);
//# sourceMappingURL=chunk-2d0e956f.afc454dd.js.map