(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd2661e","chunk-2d0df238"],{8945:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{"data-aos":"fade-right"}},[a("v-breadcrumbs",{staticClass:"breadcrumbsmain",attrs:{dark:"dark"==e.$store.state.theme,items:[{text:"Activities",disabled:!0,href:"breadcrumbs_dashboard"},{text:"Distribusi",disabled:!0,href:"Distribusi"},{text:"Seedling Change Request",disabled:!0,href:"breadcrumbs_link_1"}],divider:">",large:""}})],1)])},n=[],s={data:function(){return{}}},o=s,i=a("2877"),l=a("6544"),c=a.n(l),u=a("2bc5"),d=Object(i["a"])(o,r,n,!1,null,null,null);t["default"]=d.exports;c()(d,{VBreadcrumbs:u["a"]})},dec9:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumbs"),a("createDialog",{attrs:{show:e.dialogs.create.show,programYear:e.programYear,landProgram:e.landProgram.model},on:{close:function(t){return e.closeDialogs(t)}}}),a("detailDialog",{attrs:{show:e.dialogs.detail.show,landProgram:e.landProgram.model,id:e.dialogs.detail.id,settings:e.settings},on:{close:function(t){return e.closeDialogs(t)}}}),a("v-data-table",{staticClass:"mx-3 rounded-xl",attrs:{"data-aos":"fade-up","data-aos-delay":"300",headers:e.table.headers[e.landProgram.model],items:e.table.items,loading:e.table.loading,search:e.table.search},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-row",{staticClass:"align-center justify-center pa-2 pt-3 mx-0"},[a("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.$store.state.programYear.options,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:"Program Year",disabled:e.table.loading},model:{value:e.programYear,callback:function(t){e.programYear=t},expression:"programYear"}}),a("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.landProgram.items,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:e.landProgram.label,disabled:e.table.loading},model:{value:e.landProgram.model,callback:function(t){e.$set(e.landProgram,"model",t)},expression:"landProgram.model"}}),e.nursery.show?a("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.nursery.items,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:"Nursery",disabled:e.table.loading||e.nursery.disabled},model:{value:e.nursery.model,callback:function(t){e.$set(e.nursery,"model",t)},expression:"nursery.model"}}):e._e(),a("v-spacer",{staticClass:"d-none d-lg-inline-block"}),a("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"300px"},attrs:{color:"success","item-color":"success","append-icon":"mdi-magnify",outlined:"",dense:"",rounded:"",label:"Search","hide-details":"",disabled:e.table.loading},model:{value:e.table.search,callback:function(t){e.$set(e.table,"search",t)},expression:"table.search"}}),a("v-btn",{attrs:{rounded:"",small:"",color:"orange white--text my-1",disabled:e.disabledCreateRequestButton},on:{click:function(){return e.dialogs.create.show=!0}}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-chat-plus")]),e._v(" Add New Request")],1)],1)]},proxy:!0},{key:"item.request_no",fn:function(t){var r=t.item;return[a("v-tooltip",{attrs:{right:"","content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[a("v-chip",e._g(e._b({staticStyle:{"text-transform":"uppercase"},attrs:{color:e.statusColorAndIcon(r.status,"color","request")},on:{click:function(){return e.initialize()}}},"v-chip",s,!1),n),[a("v-icon",{staticClass:"mr-1"},[e._v(e._s(e.statusColorAndIcon(r.status,"icon","request")))]),e._v(" "+e._s(r.request_no)+" ")],1)]}}],null,!0)},[e._v(" Requested By: "+e._s(r.created_by)+" ")])]}},{key:"item.lahan_no",fn:function(t){var r=t.item;return[e.lahanNoFormat(r.lahan_no).length<2?a("v-chip",{staticClass:"green white--text ma-1"},[e._v(" "+e._s(e.lahanNoFormat(r.lahan_no)[0])+" ")]):a("v-menu",{attrs:{"open-on-hover":"","offset-x":"","close-on-content-click":!1,"content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.attrs,s=t.on;return[a("v-btn",e._g(e._b({attrs:{rounded:"",small:"",color:"green darken-"+(e.lahanNoFormat(r.lahan_no).length-1<5?e.lahanNoFormat(r.lahan_no).length-1:4)+" white--text"}},"v-btn",n,!1),s),[e._v(" "+e._s(e.lahanNoFormat(r.lahan_no).length)+" Lahan ")])]}}],null,!0)},[a("v-card",{staticClass:"pa-2 pb-1 d-flex flex-column"},e._l(e.lahanNoFormat(r.lahan_no),(function(t,r){return a("v-chip",{key:r,staticClass:"mb-1",staticStyle:{cursor:"auto"},attrs:{color:"green white--text"}},[e._v(" "+e._s(t)+" ")])})),1)],1)]}},{key:"item.verification",fn:function(t){var r=t.item;return[a("v-chip",{staticClass:"pl-1",staticStyle:{"text-transform":"uppercase"},attrs:{color:e.statusColorAndIcon(r.verification,"color","verification",r.status)}},[a("v-icon",{staticClass:"mr-1"},[e._v(e._s(e.statusColorAndIcon(r.verification,"icon","verification",r.status)))]),e._v(" "+e._s(e.statusColorAndIcon(r.verification,"text","verification",r.status))+" ")],1)]}},{key:"item.actions",fn:function(t){var r=t.item;return[a("v-menu",{attrs:{"content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.attrs,n=t.on;return[a("v-btn",e._g(e._b({attrs:{small:"",fab:"",icon:""}},"v-btn",r,!1),n),[a("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[a("v-card",{staticClass:"pa-2 d-flex align-stretch flex-column justify-center"},[a("v-btn",{staticClass:"pl-1 d-flex justify-start align-center",attrs:{color:"info white--text",rounded:"",small:""},on:{click:function(){e.showDetailDialog(r)}}},[a("v-icon",{staticClass:"mr-1"},[e._v("mdi-information")]),e._v(" Detail ")],1)],1)],1)]}}])}),a("v-snackbar",{staticClass:"d-flex",attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout,rounded:"xl"},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[a("div",{staticClass:"d-flex justify-between"},[a("p",{staticClass:"mb-0"},[e._v(" "+e._s(e.snackbar.text)+" ")]),a("v-spacer"),a("v-icon",{staticClass:"pl-1",attrs:{small:""},on:{click:function(){return e.snackbar.show=!1}}},[e._v("mdi-close-circle")])],1)])],1)},n=[],s=a("5530"),o=a("2909"),i=a("1da1"),l=(a("99af"),a("caad"),a("2532"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("25f0"),a("b0c0"),a("ac1f"),a("1276"),a("5319"),a("96cf"),a("bc3a")),c=a.n(l),u=a("8945"),d=a("fb04"),m=a("afd4"),g={components:{breadcrumbs:u["default"],createDialog:d["default"],detailDialog:m["default"]},data:function(){return{landProgram:{label:"Land Program",items:["Petani","Umum"],model:"Petani"},nursery:{disabled:!1,model:"All",items:["All","Arjasari","Ciminyak","Kebumen","Pati"],show:!0},programYear:"",dialogs:{create:{show:!1},detail:{id:"",show:!1}},table:{headers:{Petani:[{text:"Request No",value:"request_no"},{text:"Nursery",value:"nursery"},{text:"Management Unit",value:"mu_name"},{text:"FF",value:"ff_name"},{text:"Farmer",value:"farmer_name"},{text:"Lahan No",value:"lahan_no"},{text:"Status",value:"verification"},{text:"Actions",value:"actions",align:"right"}],Umum:[{text:"Request No",value:"request_no"},{text:"Nursery",value:"nursery"},{text:"Management Unit",value:"mu_name"},{text:"PIC T4T",value:"pic_t4t_name"},{text:"PIC Lahan",value:"pic_lahan"},{text:"Lahan No",value:"lahan_no"},{text:"Status",value:"verification"},{text:"Actions",value:"actions",align:"right"}]},items:[],loading:!1,search:""},settings:{prefixUrl:"SeedlingChangeRequest/",apiConfig:{}},snackbar:{color:"green",timeout:5e3,show:!1,text:"Alert!",multiLine:!1},User:{}}},watch:{"landProgram.model":{handler:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initialize();case 2:case"end":return t.stop()}}),t)})))()}},"nursery.model":{handler:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.state.User,t.next=3,e.initialize();case 3:"IT"!=a.role_group&&"REGIONAL MANAGER"!=a.role_name&&"PROGRAM MANAGER"!=a.role_name||(e.nursery.disabled=!1);case 4:case"end":return t.stop()}}),t)})))()}}},computed:{disabledCreateRequestButton:function(){var e=!1,t=this.User;if("NURSERY MANAGER"==t.role_name)e=!1;else{var a=this.$store.state.nurseryTeam.emails.Kebumen,r=this.$store.state.nurseryTeam.emails.Pati,n=[].concat(Object(o["a"])(a),Object(o["a"])(r),["rizki.pradhitya@trees4trees.org","um_pati@t4t.org"]);e=!n.includes(t.email)}return"IT"==t.role_group&&(e=!1),e}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.programYear=e.$store.state.programYear.model,e.settings.apiConfig=e.$store.state.apiConfig,t.next=4,e.initialize();case 4:"IT"!=e.User.role_group&&"um_pati@t4t.org"!=e.User.email&&(e.$store.state.maintenanceOverlay=!1);case 5:case"end":return t.stop()}}),t)})))()},destroyed:function(){this.$store.state.maintenanceOverlay=!1,this.$store.state.loadingOverlay=!1,this.$store.state.loadingOverlayText=null},methods:{initialize:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.User=e.$store.state.User,t.next=3,e.setNurserySite();case 3:return t.next=5,e.getRequests();case 5:case"end":return t.stop()}}),t)})))()},getRequests:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,o,i,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.table.loading=!0,e.table.items=[],a=e.User,r=new URLSearchParams({land_program:e.landProgram.model,program_year:e.programYear,nursery:e.nursery.model,ff:a.ff.ff.toString()}),"Umum"==e.landProgram.model&&(n=a.role_name,s=a.role_group,o=["PROGRAM MANAGER","REGIONAL MANAGER","NURSERY MANAGER"],"IT"!=s&&0==o.includes(n)&&(r.delete("ff"),r.set("created_by",a.email))),i=e.$store.getters.getApiUrl("".concat(e.settings.prefixUrl,"GetRequests?").concat(r)),l=e.$store.state.apiConfig,t.next=10,c.a.get(i,l).then((function(e){return e.data}));case 10:u=t.sent,e.table.items=u.list,t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),e.sessionEnd(t.t0),console.log(t.t0);case 18:return t.prev=18,e.table.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,14,18,21]])})))()},showDetailDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialogs.detail.id=e.request_no,t.dialogs.detail.show=!0;case 2:case"end":return a.stop()}}),a)})))()},closeDialogs:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialogs[e.name].show=!1,e.snackbar&&(t.snackbar=Object(s["a"])({},e.snackbar),"green"==e.snackbar.color&&t.initialize());case 2:case"end":return a.stop()}}),a)})))()},lahanNoFormat:function(e){return e.replace("[","").replace("]","").split(",")},sessionEnd:function(e){e.response&&"undefined"!=typeof e.response.status&&(401==e.response.status?(localStorage.removeItem("token"),this.$router.push("/")):400==e.response.status&&(this.snackbar.text=e.response.data,this.snackbar.color="red",this.snackbar.show=!0))},statusColorAndIcon:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n="";if("request"==a)return"color"==t?(n="requested"==e?"orange":"rejected"==e||"canceled"==e?"red":"green",n+" white--text"):(n="requested"==e?"chat-processing":"rejected"==e||"canceled"==e?"chat-remove":"check-decagram","mdi-"+n);if("color"==t)return 0==e?n="red":1==e?n="orange":2==e?n="yellow darken-2":3==e&&(n="green"),"rejected"!=r&&"canceled"!=r||(n="red"),n+" white--text";if("icon"==t)return 0==e?n="progress-alert":1==e?n="progress-check":2==e?n="check-circle":3==e&&(n="checkbox-multiple-marked-circle"),"rejected"!=r&&"canceled"!=r||(n="close-circle"),"mdi-"+n;var s=this.landProgram.model;return 0==e?n="UNVERIFIED":1==e?n="VERIFIED ".concat("Petani"==s?"FC":"PIC T4T"):2==e?n="VERIFIED UM":3==e&&(n="VERIFIED RM / PM"),"rejected"==r?n="REJECTED":"canceled"==r&&(n="CANCELED"),n},setNurserySite:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,i,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.$store.state.nurseryTeam.emails.Arjasari,r=e.$store.state.nurseryTeam.emails.Ciminyak,n=[].concat(Object(o["a"])(e.$store.state.nurseryTeam.emails.Kebumen),["rizki.pradhitya@trees4trees.org"]),s=[].concat(Object(o["a"])(e.$store.state.nurseryTeam.emails.Pati),["um_pati@t4t.org"]),i=e.$store.state.User,l=i.email,c=e.nursery.model,a.includes(l)?c="Arjasari":r.includes(l)?c="Ciminyak":n.includes(l)?c="Kebumen":s.includes(l)&&(c="Pati"),"NURSERY MANAGER"==i.role_name&&(e.nursery.disabled=!0),"IT"!=i.role_group&&"REGIONAL MANAGER"!=i.role_name&&"PROGRAM MANAGER"!=i.role_name&&(e.nursery.show=!1),e.nursery.model=c;case 11:case"end":return t.stop()}}),t)})))()}}},h=g,f=a("2877"),b=a("6544"),p=a.n(b),v=a("8336"),x=a("b0af"),_=a("cc20"),y=a("8fea"),w=a("132d"),k=a("e449"),R=a("0fd9"),C=a("b974"),A=a("2db4"),N=a("2fa4"),P=a("8654"),E=a("3a2f"),j=Object(f["a"])(h,r,n,!1,null,null,null);t["default"]=j.exports;p()(j,{VBtn:v["a"],VCard:x["a"],VChip:_["a"],VDataTable:y["a"],VIcon:w["a"],VMenu:k["a"],VRow:R["a"],VSelect:C["a"],VSnackbar:A["a"],VSpacer:N["a"],VTextField:P["a"],VTooltip:E["a"]})}}]);
//# sourceMappingURL=chunk-4cd2661e.8bb9db5f.js.map