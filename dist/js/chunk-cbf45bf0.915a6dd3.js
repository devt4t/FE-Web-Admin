(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbf45bf0"],{"23a7":function(t,e,a){"use strict";a("13d5"),a("5803");var i=a("2677"),s=a("cc20"),l=a("80d2"),n=a("d9bd"),o=a("d9f7");e["a"]=i["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"===typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>Object(l["H"])(t).every(t=>null!=t&&"object"===typeof t)}},computed:{classes(){return{...i["a"].options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce((t,{size:e=0})=>t+e,0);return this.$vuetify.lang.t(this.counterSizeString,t,Object(l["w"])(e,1024===this.base))},internalArrayValue(){return Object(l["H"])(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},isMultiple(){return this.$attrs.hasOwnProperty("multiple")},text(){return this.isDirty||!this.isFocused&&this.hasLabel?this.internalArrayValue.map(t=>{const{name:e="",size:a=0}=t,i=this.truncateText(e);return this.showSize?`${i} (${Object(l["w"])(a,1024===this.base)})`:i}):[this.placeholder]},base(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&Object(n["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.isMultiple?t:t?[t]:[];Object(l["j"])(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.isMultiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((t,e)=>this.$createElement(s["a"],{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t])):[]},genControl(){const t=i["a"].options.methods.genControl.call(this);return this.hideInput&&(t.data.style=Object(o["d"])(t.data.style,{display:"none"})),t},genInput(){const t=i["a"].options.methods.genInput.call(this);return delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((e,a)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[a],file:e,index:a}))}):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=i["a"].options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.isMultiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}â€¦${t.slice(t.length-e)}`}}})},2677:function(t,e,a){"use strict";var i=a("8654");e["a"]=i["a"]},5803:function(t,e,a){},"7aac5":function(t){t.exports=JSON.parse("{}")},e868:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("v-dialog",{attrs:{"content-class":"rounded-xl mx-1","max-width":"999",scrollable:"",persistent:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[e("v-card",[e("v-card-title",{staticClass:"rounded-xl green darken-3 ma-1 pa-2"},[e("span",{staticClass:"white--text"},[e("v-btn",{staticClass:"white dark--text mr-1",attrs:{fab:"","x-small":""}},[e("v-icon",{attrs:{color:"grey darken-3"}},[t._v("mdi-account-heart")])],1),t._v(" Form Minat Petani")],1),e("v-icon",{staticClass:"ml-auto",attrs:{color:"white"},on:{click:function(e){t.showModal=!1}}},[t._v("mdi-close-circle")])],1),e("v-card-text",{staticClass:"pa-0"},[e("v-overlay",{attrs:{absolute:"",value:t.loading.show}},[e("div",{staticClass:"d-flex flex-column justify-center align-center"},[e("v-progress-circular",{attrs:{size:80,width:10,indeterminate:"",color:"white"}}),e("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(t.loading.text))])],1)]),e("v-row",{staticClass:"ma-0 mx-2 mx-lg-5"},[e("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"12"}},[e("p",{staticClass:"mb-0 red--text"},[t._v(' Tanda "'),e("v-icon",{attrs:{color:"red"}},[t._v(t._s(t.localConfig.requiredInputIcon))]),t._v('" menandakan WAJIB DIISI. ')],1)]),e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex align-center"},[e("p",{staticClass:"mb-0",staticStyle:{"font-size":"17px"}},[e("v-icon",{staticClass:"mr-2"},[t._v("mdi-city")]),t._v("Lokasi Desa ")],1),e("v-divider",{staticClass:"mx-2"})],1)]),e("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[e("v-autocomplete",{attrs:{dense:"",color:"success","hide-details":"","item-color":"success","item-text":"name","item-value":"mu_no",items:t.inputs.mu_no.items,label:t.inputs.mu_no.label,loading:t.inputs.mu_no.loading,"menu-props":{rounded:"xl",transition:"slide-y-transition"},"no-data-text":t.inputs.mu_no.loading?"Loading...":"No Data",outlined:"",rounded:"",rules:[t=>!!t||"Field is required"]},on:{change:function(e){return t.getOptionsData({type:"target_area"})}},scopedSlots:t._u([{key:"label",fn:function(){return[t.inputs.mu_no.labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(t.inputs.mu_no.labelIcon))]):t._e(),t._v(" "+t._s(t.inputs.mu_no.label)+" "),e("sup",[t.inputs.mu_no.required?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0}]),model:{value:t.inputs.mu_no.model,callback:function(e){t.$set(t.inputs.mu_no,"model",e)},expression:"inputs.mu_no.model"}})],1),e("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[e("v-autocomplete",{attrs:{dense:"",color:"success","hide-details":"","item-color":"success","item-text":"name","item-value":"area_code",items:t.inputs.target_area.items,label:t.inputs.target_area.label,loading:t.inputs.target_area.loading,"menu-props":{rounded:"xl",transition:"slide-y-transition"},"no-data-text":t.inputs.target_area.loading?"Loading...":"No Data",disabled:!1,outlined:"",rounded:"",rules:[t=>!!t||"Field is required"]},on:{change:function(e){return t.getOptionsData({type:"village"})}},scopedSlots:t._u([{key:"label",fn:function(){return[t.inputs.target_area.labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(t.inputs.target_area.labelIcon))]):t._e(),t._v(" "+t._s(t.inputs.target_area.label)+" "),e("sup",[t.inputs.target_area.required?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0}]),model:{value:t.inputs.target_area.model,callback:function(e){t.$set(t.inputs.target_area,"model",e)},expression:"inputs.target_area.model"}})],1),e("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[e("v-autocomplete",{attrs:{dense:"",color:"success","hide-details":"","item-color":"success","item-text":"name","item-value":"kode_desa",items:t.inputs.village.items,label:t.inputs.village.label,loading:t.inputs.village.loading,"menu-props":{rounded:"xl",transition:"slide-y-transition"},"no-data-text":t.inputs.village.loading?"Loading...":"No Data",disabled:!1,outlined:"",rounded:"",rules:[t=>!!t||"Field is required"]},scopedSlots:t._u([{key:"label",fn:function(){return[t.inputs.village.labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(t.inputs.village.labelIcon))]):t._e(),t._v(" "+t._s(t.inputs.village.label)+" "),e("sup",[t.inputs.village.required?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0}]),model:{value:t.inputs.village.model,callback:function(e){t.$set(t.inputs.village,"model",e)},expression:"inputs.village.model"}})],1)],1),e("v-row",{staticClass:"ma-0 mx-2 mx-lg-5"},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex align-center"},[e("p",{staticClass:"mb-0",staticStyle:{"font-size":"17px"}},[e("v-icon",{staticClass:"mr-2"},[t._v("mdi-calendar")]),t._v("Tanggal ")],1),e("v-divider",{staticClass:"mx-2"})],1)]),e("v-col",{attrs:{cols:"12",sm:"12",md:"6",lg:"6"}},[e("v-menu",{attrs:{rounded:"xl",transition:"slide-x-transition",bottom:"","min-width":"100","offset-y":"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e("v-tooltip",{attrs:{top:"","content-class":"rounded-xl"},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("v-text-field",t._g(t._b({staticClass:"mb-2 mb-lg-0 mr-0 mr-lg-2",attrs:{dense:"",color:"green","hide-details":"",outlined:"",rounded:"",readonly:""},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(t.inputs.form_date.label)+" "),e("sup",[t.inputs.form_date.required?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0}],null,!0),model:{value:t.inputs.form_date.modelShow,callback:function(e){t.$set(t.inputs.form_date,"modelShow",e)},expression:"inputs.form_date.modelShow"}},"v-text-field",i,!1),{...a,...s}))]}}],null,!0)},[e("span",[t._v("Klik untuk memunculkan datepicker")])])]}}]),model:{value:t.inputs.form_date.show,callback:function(e){t.$set(t.inputs.form_date,"show",e)},expression:"inputs.form_date.show"}},[e("div",{staticClass:"rounded-xl pb-2 white"},[e("div",{staticClass:"d-flex flex-column align-center rounded-xl"},[e("v-date-picker",{attrs:{range:"range"===t.inputs.form_date.dateType,color:"green lighten-1 rounded-xl",min:"2022-11-24"},model:{value:t.inputs.form_date.model,callback:function(e){t.$set(t.inputs.form_date,"model",e)},expression:"inputs.form_date.model"}})],1)])])],1)],1),e("v-row",{staticClass:"ma-0 mx-2 mx-lg-5"},[e("v-col",{attrs:{cols:"12"}},[e("div",{staticClass:"d-flex align-center"},[e("p",{staticClass:"mb-0",staticStyle:{"font-size":"17px"}},[e("v-icon",{staticClass:"mr-2"},[t._v(t._s(t.inputs.list_farmer.labelIcon))]),t._v(t._s(t.inputs.list_farmer.label)+" ")],1),e("v-divider",{staticClass:"mx-2"})],1)]),e("v-col",{attrs:{cols:"12"}},[t._l(t.inputs.list_farmer.model,(function(a,i){return e("v-row",{key:"farmer-"+i,staticClass:"mx-0"},[e("v-col",{attrs:{cols:"auto"}},[e("v-btn",{staticClass:"elevation-0 mt-1",attrs:{fab:"","x-small":"",color:"green white--text"}},[t._v(t._s(i+1))])],1),e("v-col",{attrs:{cols:"12",md:"10",lg:"10"}},[e("v-row",t._l(Object.entries(t.inputs.list_farmer.form),(function(s,l){return t.inputsListFarmerRoles(s,i)?e("v-col",{key:`input-farmer-${i}-${l}`,attrs:{cols:s[1].cols[0],sm:s[1].cols[1],md:s[1].cols[2],lg:s[1].cols[3]}},["text-field"==s[1].inputType?e("div",[e("v-text-field",{attrs:{dense:"",color:"success","hide-details":"",label:s[1].label,outlined:"",rounded:"",placeholder:s[1].placeholder,type:s[1].type},scopedSlots:t._u([{key:"label",fn:function(){return[s[1].labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(s[1].labelIcon))]):t._e(),t._v(" "+t._s(s[1].label)+" "),e("sup",[t.inputsListFarmerRequired(s,i)?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0},{key:"append",fn:function(){return[e("div",{staticClass:"mt-1 ml-1",domProps:{innerHTML:t._s(s[1].append)}})]},proxy:!0}],null,!0),model:{value:a[s[0]],callback:function(e){t.$set(a,s[0],e)},expression:"item[input[0]]"}})],1):"autocomplete"==s[1].inputType?e("div",[e("v-autocomplete",{attrs:{"small-chips":s[1].chips,clearable:s[1].clearable,color:"success",dense:s[1].dense,"hide-details":"","item-color":"success","item-text":s[1].itemText,"item-value":s[1].itemValue,items:s[1].items,multiple:s[1].multiple,label:s[1].label,"menu-props":{rounded:"xl",transition:"slide-y-transition"},outlined:"",rounded:"",readonly:s[1].readonly},on:{change:function(e){return t.inputsListFarmerChange(s,i)}},scopedSlots:t._u([{key:"label",fn:function(){return[s[1].labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(s[1].labelIcon))]):t._e(),t._v(" "+t._s(s[1].label)+" "),e("sup",[t.inputsListFarmerRequired(s,i)?e("v-icon",{staticStyle:{"vertical-align":"middle"},attrs:{small:""}},[t._v(t._s(t.localConfig.requiredInputIcon))]):t._e()],1)]},proxy:!0},{key:"item",fn:function(a){return[e("v-list-item-content",[e("v-list-item-title",{domProps:{innerHTML:t._s(a.item[s[1].itemText]||a.item)}}),a.item[s[1].itemSub]?e("v-list-item-subtitle",[t._v(t._s(a.item[s[1].itemSub]))]):t._e()],1)]}},{key:"selection",fn:function({attrs:a,item:i,parent:l,selected:n}){return[s[1].chips?e("v-chip",t._b({staticClass:"rounded-pill",attrs:{"input-value":n,label:"",small:""}},"v-chip",a,!1),[e("span",{staticClass:"pr-2"},[t._v(" "+t._s(i[s[1].itemText]||i)+" ")]),e("v-icon",{attrs:{small:""},on:{click:function(t){return l.selectItem(i)}}},[t._v(" mdi-close-circle ")])],1):e("span",[t._v(" "+t._s(i[s[1].itemText]||i)+" ")])]}}],null,!0),model:{value:a[s[0]],callback:function(e){t.$set(a,s[0],e)},expression:"item[input[0]]"}})],1):"file-input"==s[1].inputType?e("div",[e("v-file-input",{ref:"filePhotoMinat",refInFor:!0,attrs:{accept:s[1].accept,clearable:s[1].clearable,color:"success",dense:s[1].dense,"hide-details":"",label:s[1].label,outlined:"",rounded:"",placeholder:s[1].placeholder,"prepend-icon":s[1].prependIcon,readonly:s[1].readonly,"show-size":s[1].showSize,"small-chips":s[1].chips,solo:s[1].solo,"solo-inverted":s[1].soloInverted,success:s[1].success,"validate-on-blur":s[1].validateOnBlur},on:{change:function(e){return t.previewFile(a,i)}},scopedSlots:t._u([{key:"label",fn:function(){return[s[1].labelIcon?e("v-icon",{staticClass:"mr-1"},[t._v(t._s(s[1].labelIcon))]):t._e(),t._v(" "+t._s(s[1].label)+" ")]},proxy:!0},{key:"selection",fn:function({text:a}){return[e("span",[t._v(t._s(a))])]}}],null,!0),model:{value:a[s[0]],callback:function(e){t.$set(a,s[0],e)},expression:"item[input[0]]"}}),e("div",{staticClass:"h-25 w-25"},[t.previewPhotoMinat[i]?e("v-img",{staticClass:"rounded mt-2",attrs:{width:300,height:300,src:t.previewPhotoMinat[i]},on:{click:function(e){return t.showLightbox(t.previewPhotoMinat[i])}}},[e("v-icon",{attrs:{small:""},on:{click:function(e){return t.removePreviewPhotoMinat(i)}}},[t._v("mdi-close-circle")])],1):t._e()],1)],1):t._e()]):t._e()})),1)],1),i>0?e("v-col",{staticClass:"d-flex justify-end",attrs:{cols:"auto",lg:"1"}},[e("v-tooltip",{scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e("v-btn",t._g(t._b({staticClass:"elevation-0 mt-1",attrs:{fab:"","x-small":"",color:"red white--text",disabled:0===i},on:{click:()=>t.modifyTotalSubData("-","list_farmer",i)}},"v-btn",s,!1),a),[e("v-icon",[t._v("mdi-close")])],1)]}}],null,!0)},[t._v(" Remove data ")])],1):t._e()],1)})),e("v-row",{staticClass:"justify-center ma-0 mt-4"},[e("v-btn",{staticClass:"pl-2",attrs:{rounded:"",color:"green white--text",outlined:""},on:{click:()=>t.modifyTotalSubData("+","list_farmer")}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-plus-circle")]),t._v(" Tambah Data ")],1)],1)],2)],1)],1),e("v-card-actions",[e("v-btn",{staticClass:"pl-2",attrs:{"data-aos":"zoom-in","data-aos-duration":"300","data-aos-offset":"-100000",text:"",rounded:"",color:"red"},on:{click:function(e){t.showModal=!1}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-close-circle")]),t._v(" Keluar ")],1),e("v-divider",{staticClass:"mx-2"}),e("v-btn",{key:"saveButton"+t.disableSave,attrs:{"data-aos":"zoom-in","data-aos-duration":"700","data-aos-offset":"-100000",color:"primary white--text",rounded:"",disabled:t.isDisabled},on:{click:()=>t.save()}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-content-save")]),t._v(" Simpan ")],1)],1)],1)],1)},s=[],l=a("bc3a"),n=a.n(l),o=a("c1df"),r=a.n(o),u=a("3d20"),c=a.n(u),d=(a("7aac5"),{props:{show:{type:Boolean,default:!1},id:{type:String,default:null},form_no:{type:String,default:null},programYear:{type:String,default:r()().format("YYYY")},status:{type:String,default:null}},data:()=>({previewPhotoMinat:[],tempDataPhoto:[],isDisabled:!1,inputs:{program_year:{model:"",required:!0},mu_no:{type:"text",label:"Management Unit",model:"",required:!0,items:[],loading:!1},target_area:{type:"text",label:"Target Area",model:"",required:!0,items:[],loading:!1},village:{type:"text",items:[],label:"Desa",required:!0,model:"",loading:!1},form_date:{loading:!1,label:"Tanggal Sosialisasi",model:null,modelShow:"",inputType:"datepicker",dateType:"date",lgView:4,required:!0,type:"Date"},list_farmer:{default:[{name:null,respond_to_programs:null,pattern:null,training:null,kayu:[],mpts:[],photo_form_minat:[]}],form:{name:{cols:[12,12,12,12],inputType:"text-field",label:"Nama Petani",labelIcon:"mdi-account-tag",type:"text"},respond_to_programs:{chips:!1,clearable:!1,cols:[12,6,6,5],dense:!0,inputType:"autocomplete",items:["Ya","Ragu - Ragu","Tidak"],itemSub:null,itemText:"value",itemValue:"value",label:"Berminat?",labelIcon:null,multiple:!1,type:"bool"},pattern:{chips:!1,clearable:!0,cols:[12,6,6,7],dense:!0,inputType:"autocomplete",items:[],itemSub:null,itemText:"value",itemValue:"value",label:"Pola Tanam Sebelumnya",labelIcon:null,multiple:!1,type:"text"},training:{chips:!1,clearable:!0,cols:[12,12,12,12],dense:!0,inputType:"autocomplete",items:[],itemSub:"material_no",itemText:"material_name",itemValue:"material_no",label:"Materi Pelatihan",labelIcon:null,multiple:!1,type:"text"},kayu:{chips:!0,clearable:!0,cols:[12,12,12,12],dense:!1,inputType:"autocomplete",items:[],itemSub:null,itemText:"tree_name",itemValue:"tree_code",label:"Pohon Kayu yang diminati",labelIcon:null,multiple:!0,type:"text"},mpts:{chips:!0,clearable:!0,cols:[12,12,12,12],dense:!1,inputType:"autocomplete",itemText:"tree_name",itemValue:"tree_code",items:[],label:"Pohon Mpts yang diminati",labelIcon:null,multiple:!0,type:"text"},photo_form_minat:{cols:[12,12,12,12],inputType:"file-input",accept:".jpg,.JPG,.jpeg,.JPEG,.png,.PNG",model:[],preview:!0,label:"Foto Minat",labelIcon:"mdi-camera",items:[],type:"file"}},label:"Daftar Petani",labelIcon:"mdi-list-box",model:[]}},loading:{show:!1,text:"Loading..."},localConfig:{windowWidth:window.innerWidth,breakLayoutFrom:1140,requiredInputIcon:"mdi-star",maxTreesType:3}}),watch:{"inputs.form_date.model":{async handler(t){this.inputs.form_date.modelShow=this._utils.dateFormat(t,"DD MMMM Y")}},"inputs.kayu.model":{async handler(t,e){const a=t.length,i=this.inputs.mpts.model.length;if(a+i>3){await c.a.fire({title:"Melebihi Batas!",text:"Batas maksimal jumlah jenis adalah 3.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});this.inputs.kayu.model=e}}},"inputs.mpts.model":{async handler(t,e){const a=t.length,i=this.inputs.kayu.model.length;if(0===i&&a>2){await c.a.fire({title:"Belum Pilih KAYU!",text:"Minimal pilh 1 jenis kayu.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});this.inputs.mpts.model=e}if(i+a>3){await c.a.fire({title:"Melebihi Batas!",text:"Batas maksimal jumlah jenis adalah 3.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});this.inputs.mpts.model=e}}}},computed:{showModal:{get:function(){return this.show&&(this.inputs.program_year.model=this.programYear,"edit"===this.status&&this.getDetailData(this.form_no)),this.show},set:function(t){t||this.$emit("action",{type:"close",name:"form"})}},disableSave(){let t=[];for(const[e,a]of Object.entries(this.inputs))!0===a.required&&("bool"!==a.type&&"array"!==a.type&&(a.model||t.push(e)),"array"===a.type&&0===a.model.length&&requriedEmpty.push(e));return this.inputs.list_farmer.model.forEach(e=>{if(e.name&&e.respond_to_programs||t.push("list_farmer, name or respond_to_programs"),"Tidak"!=e.respond_to_programs){"Ya"!=e.respond_to_programs||e.training||t.push("list_farmer, training");const a=e.kayu.length,i=e.mpts.length;0===a&&t.push("list_farmer, kayu"),i>this.localConfig.maxTreesType-1&&(c.a.fire({title:"Melebihi Batas!",text:`Jumlah total jenis KAYU + MPTS maksimal adalah ${this.localConfig.maxTreesType}! Harap KURANGI pilihan jenis MPTS dan MINIMAL memilih 1 jenis KAYU.`,icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"}),t.push("list_farmer, mpts")),a+i>this.localConfig.maxTreesType&&(c.a.fire({title:"Melebihi Batas!",text:`Jumlah total jenis KAYU + MPTS maksimal adalah ${this.localConfig.maxTreesType}! Harap KURANGI jenis pohon untuk bisa MENYIMPAN data.`,icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"}),t.push("list_farmer, max_trees"))}}),t.length>0?this.isDisabled=!0:this.isDisabled=!1,this.isDisabled}},mounted(){this.$nextTick(()=>{window.addEventListener("resize",this.onResize)}),this.getDefaultData()},methods:{async callApiGet(t){try{const e=await n.a.get(this.$store.getters.getApiUrl(t),this.$store.state.apiConfig);if(e){const t=e.data.data.result;return t}return null}catch(e){this.errorResponse(e)}},async errorResponse(t){if(console.log(t),t.response&&t.response.status){if(401==t.response.status){const t=await c.a.fire({title:"Session Ended!",text:"Please login again.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});t&&(localStorage.removeItem("token"),this.$router.push("/"))}if(500===t.response.status||400===t.response.status){let e=t.response.data.message;e&&e.includes("Duplicate entry")&&(e="Data sudah ada!"),c.a.fire({title:"Error!",text:""+(e||t.message),icon:"error",confirmButtonColor:"#f44336"})}}},async getDefaultData(){try{console.log("getDefaultData"),this.loading.show=!0,this.loading.text='Preparing "sosialisasi program" form...',this.inputs.form_date.model=r()().format("YYYY-MM-DD"),this.inputs.list_farmer.model=JSON.parse(JSON.stringify(this.inputs.list_farmer.default)),this.loading.text="Getting list management units...",await this.getOptionsData({type:"mu_no"}),this.loading.text="Getting list opsi pola tanam...",this.inputs.list_farmer.form.pattern.items=await this.callApiGet("GetOpsiPolaTanamOptions"),this.loading.text="Getting list materi pelatihan...",this.inputs.list_farmer.form.training.items=await this.callApiGet("GetTrainingMaterials"),this.loading.text="Getting trees data...";const t=await this.callApiGet("GetTreesAll"),e=await t.data.filter(t=>"Pohon_Kayu"===t.tree_category),a=await t.data.filter(t=>"Pohon_Buah"===t.tree_category);this.inputs.list_farmer.form.kayu.items=e,this.inputs.list_farmer.form.mpts.items=a}catch(t){this.errorResponse(t)}finally{this.loading.show=!1}},async getOptionsData(t){try{let e="";if("mu_no"==t.type?e="GetManagementUnit?program_year="+this.programYear:"target_area"==t.type?e=`GetTargetArea?program_year=${this.programYear}&mu_no=${this.inputs.mu_no.model}`:"village"==t.type&&(e=`GetDesa?program_year=${this.programYear}&&kode_ta=${this.inputs.target_area.model}`),this.$store.state.loadingOverlayText=`Getting ${t.type} datas...`,"mu_no"==t.type&&(this.inputs.target_area.model="",this.inputs.target_area.items=[]),["mu_no","target_area"].includes(t.type)&&(this.inputs.village.model="",this.inputs.village.items=[]),""!=e){e=this.$store.getters.getApiUrl(e),this.inputs[t.type].model="",this.inputs[t.type].loading=!0;const a=await n.a.get(e,this.$store.state.apiConfig);this.inputs[t.type].items=a.data.data.result.sort((t,e)=>t.name.localeCompare(e.name))}}catch(e){this.errorResponse(e),this.inputs[t.type].items=[]}finally{this.$store.state.loadingOverlayText=null,this.inputs[t.type].loading=!1}},inputsListFarmerRequired(t,e){return!!["name","respond_to_programs"].includes(t[0])||("Ya"==this.inputs.list_farmer.model[e].respond_to_programs&&!["mpts","pattern"].includes(t[0])||!("Ragu - Ragu"!=this.inputs.list_farmer.model[e].respond_to_programs||!["kayu"].includes(t[0])))},inputsListFarmerRoles(t,e){return!!["name","respond_to_programs"].includes(t[0])||!!this.inputs.list_farmer.model[e].respond_to_programs},modifyTotalSubData(t,e,a=null){if("+"==t){const t=JSON.parse(JSON.stringify(this.inputs[e].default[0]));this.inputs[e].model.push(t)}else"-"==t&&(a?this.inputs[e].model.splice(a,1):this.inputs[e].model.pop())},onResize(){this.localConfig.windowWidth=window.innerWidth},async save(){try{const t=await c.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#2e7d32",cancelButtonColor:"#d33",cancelButtonText:"Tidak Jadi",confirmButtonText:"Ya, Lanjutkan!"});if(t){this.loading.show=!0,this.loading.text="Menyimpan data...";const t={user_id:this.$store.state.User.email};let e="",a="";for(const[s,l]of Object.entries(this.inputs))t[s]="list_farmer"===s?await Promise.all(l.model.map(async t=>{a=void 0!=t.photo_form_minat?await this.uploadFiles("photo","Photo Form Minat",t.photo_form_minat,"sosialisasi_program","photos",t.name.replace(/[^\w\s]/g,"").replace(/\s+/g,"").toLowerCase()+Math.round(+new Date/1e3)):t.photo||"";const e=[...t.kayu,...t.mpts];return{name:t.name,status_program:t.respond_to_programs,photo:a,pattern:t.pattern,training:t.training,tree1:e[0]||null,tree2:e[1]||null,tree3:e[2]||null,tree4:e[3]||null,tree5:e[4]||null}})):l.model;"edit"==this.status?(t.form_no=this.form_no,e="UpdateFormMinat"):e="AddFormMinat";const i=await n.a.post(this.$store.getters.getApiUrl(""+e),t,this.$store.state.apiConfig);i&&(this.showModal=!1,this.$emit("swal",{type:"success",message:"Yey! Data SosPro saved!"}))}}catch(t){this.errorResponse(t)}finally{this.loading.show=!1}},async setDummyData(){this.loading.text="Set Dummies data.. :)",this.inputs.mu_no.model="021",await this.getOptionsData({type:"target_area",id:this.inputs.mu_no.model}),this.inputs.target_area.model="021003",await this.getOptionsData({type:"village",id:this.inputs.target_area.model}),this.inputs.village.model="32.04.39.06",this.inputs.list_farmer.model=[{name:"Kang Asep",respond_to_programs:"Ya",pattern:"Pola Konservasi Pohon Kayu",training:"TR001",kayu:["T0009"],mpts:[]}]},async previewFile(t,e){const a=t.photo_form_minat,i=URL.createObjectURL(a);await this.$set(this.previewPhotoMinat,e,i)},async removePreviewPhotoMinat(t){await this.$set(this.previewPhotoMinat,t,null)},async uploadFiles(t,e,a,i,s,l){try{this.$store.state.loadingOverlayText=`Saving file "${e}"...`;const o=`${this.$store.state.apiUrlImage}${i}/upload.php`;let r=a;const u=this.generateFormData({dir:s,nama:l,fileToUpload:r,type:t});let c=null;const d=await n.a.post(o,u);if(d)return c=d.data.data.new_name,`${i}/${c}`}catch(o){this.errorResponse(o)}},generateFormData(t){let e=new FormData;const a=Object.entries(t);return a.forEach(([t,a])=>{Array.isArray(a)?a.map(a=>{e.append(t+"[]",a)}):e.append(t,a)}),e},async getDetailData(t){try{this.loading.show=!0,this.loading.text="Mengambil data...";let e={form_no:t};const a=await n.a.get(this.$store.getters.getApiUrl("GetFormMinatDetail"),{params:e,...this.$store.state.apiConfig});if(a){const t=a.data.data.result;this.inputs.mu_no.model=t.mu_no,await this.getOptionsData({type:"target_area",id:this.inputs.mu_no.model}),this.inputs.target_area.model=t.target_area,await this.getOptionsData({type:"village",id:this.inputs.target_area.model}),this.inputs.village.model=t.village,this.inputs.list_farmer.model=t.ListFarmer,this.inputs.list_farmer.model.forEach((t,e)=>{this.previewPhotoMinat[e]=this.$store.state.apiUrlImage+t.photo,this.inputs.list_farmer.model[e].photo=t.photo,this.tempDataPhoto[e]=t.photo,this.inputs.list_farmer.model[e].name=t.name,this.inputs.list_farmer.model[e].respond_to_programs=t.status_program,this.inputs.list_farmer.model[e].pattern=t.pattern,this.inputs.list_farmer.model[e].training=t.training,this.inputs.list_farmer.model[e].kayu=[],this.inputs.list_farmer.model[e].mpts=[],null!=t.tree1&&("Pohon_Kayu"==t.tree1.tree_category?this.inputs.list_farmer.model[e].kayu.push(t.tree1.tree_code):this.inputs.list_farmer.model[e].mpts.push(t.tree1.tree_code)),null!=t.tree2&&("Pohon_Kayu"==t.tree2.tree_category?this.inputs.list_farmer.model[e].kayu.push(t.tree2.tree_code):this.inputs.list_farmer.model[e].mpts.push(t.tree2.tree_code)),null!=t.tree3&&("Pohon_Kayu"==t.tree3.tree_category?this.inputs.list_farmer.model[e].kayu.push(t.tree3.tree_code):this.inputs.list_farmer.model[e].mpts.push(t.tree3.tree_code))})}}catch(e){this.errorResponse(e)}finally{this.loading.show=!1}},async inputsListFarmerChange(){this.inputs.list_farmer.model.forEach((t,e)=>{t.kayu.length>0?this.isDisabled=!1:this.isDisabled=!0,t.mpts.length>this.localConfig.maxTreesType-1&&(c.a.fire({title:"Melebihi Batas!",text:`Jumlah total jenis KAYU + MPTS maksimal adalah ${this.localConfig.maxTreesType}! Harap KURANGI pilihan jenis MPTS dan MINIMAL memilih 1 jenis KAYU.`,icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"}),this.isDisabled=!0),t.kayu.length+t.mpts.length>this.localConfig.maxTreesType&&(c.a.fire({title:"Melebihi Batas!",text:`Jumlah total jenis KAYU + MPTS maksimal adalah ${this.localConfig.maxTreesType}! Harap KURANGI jenis pohon untuk bisa MENYIMPAN data.`,icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"}),this.isDisabled=!0)})},showLightbox(t,e){t&&(this.$store.state.lightbox.imgs=t),this.$store.state.lightbox.index=e||0,this.$store.state.lightbox.show=!0}}}),p=d,m=a("2877"),h=a("6544"),g=a.n(h),f=a("c6a6"),_=a("8336"),v=a("b0af"),y=a("99d9"),b=a("cc20"),x=a("62ad"),w=a("2e4b"),C=a("169a"),k=a("ce7e"),S=a("23a7"),T=a("132d"),I=a("adda"),$=a("5d23"),D=a("e449"),M=a("a797"),P=a("490a"),V=a("0fd9"),B=a("8654"),O=a("3a2f"),A=Object(m["a"])(p,i,s,!1,null,null,null);e["default"]=A.exports;g()(A,{VAutocomplete:f["a"],VBtn:_["a"],VCard:v["a"],VCardActions:y["a"],VCardText:y["c"],VCardTitle:y["d"],VChip:b["a"],VCol:x["a"],VDatePicker:w["a"],VDialog:C["a"],VDivider:k["a"],VFileInput:S["a"],VIcon:T["a"],VImg:I["a"],VListItemContent:$["a"],VListItemSubtitle:$["b"],VListItemTitle:$["c"],VMenu:D["a"],VOverlay:M["a"],VProgressCircular:P["a"],VRow:V["a"],VTextField:B["a"],VTooltip:O["a"]})}}]);
//# sourceMappingURL=chunk-cbf45bf0.915a6dd3.js.map