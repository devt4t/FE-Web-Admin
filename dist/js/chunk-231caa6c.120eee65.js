(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-231caa6c"],{"4ca6":function(t,e,a){"use strict";a("ff44");var o=a("132d"),i=a("a9ad"),s=a("7560"),n=a("f2e7"),r=a("f40d"),l=a("fe6c"),d=a("58df"),c=a("80d2");e["a"]=Object(d["a"])(i["a"],Object(l["b"])(["left","bottom"]),s["a"],n["a"],r["a"]).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${Object(c["g"])(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),o=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[o]):o},genBadgeContent(){if(this.dot)return;const t=Object(c["s"])(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(o["a"],this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],a=[Object(c["s"])(this)],{"aria-atomic":o,"aria-label":i,"aria-live":s,role:n,title:r,...l}=this.$attrs;return this.inline&&this.left?a.unshift(e):a.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},a)}})},"60b6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("v-card",{staticClass:"rounded-xl mt-4"},[e("v-card-text",{staticClass:"pb-1"},[e("div",{staticClass:"d-flex align-center mb-2"},[e("v-badge",{attrs:{content:"Develop",color:"warning"}},[e("v-icon",[t._v("mdi-map")]),t._v(" Peta ")],1),e("v-divider",{staticClass:"ml-2"}),e("v-autocomplete",{staticClass:"ml-2",staticStyle:{"max-width":"250px"},attrs:{dense:"",color:"success","hide-details":"","item-color":"success",items:t.map_type.items,label:t.map_type.label,"menu-props":{rounded:"xl",transition:"slide-y-transition"},outlined:"",rounded:""},model:{value:t.map_type.model,callback:function(e){t.$set(t.map_type,"model",e)},expression:"map_type.model"}})],1),e("v-card",{staticClass:"rounded-xl elevation-0 overflow-hidden mb-4",staticStyle:{width:"100%"}},[e("v-card-text",{staticClass:"pa-0",staticStyle:{position:"relative",width:"100%"}},[t.maps.loading.show?e("v-overlay",{attrs:{absolute:"","justify-center":"","align-center":""}},[e("div",{staticClass:"d-flex flex-column align-center justify-center"},[e("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),e("p",{staticClass:"mb-0 text-center mt-4"},[t._v(t._s(t.maps.loading.text||"Loading..."))])],1)]):t._e(),e("div",{staticClass:"overflow-hidden rounded-xl",staticStyle:{position:"relative",width:"100%"},attrs:{id:"mapboxWrapper","data-aos":"fade-down"}},[e("div",{key:"DashboardMap"+t.maps.key,ref:"DashboardMapbox",staticClass:"rounded-xl overflow-hidden",staticStyle:{height:"500px",width:"100%!important"},attrs:{id:"DashboardMapboxContainer"}})])],1)],1)],1)],1)},i=[],s=a("bc3a"),n=a.n(s),r=a("3d20"),l=a.n(r),d={data:()=>({map_type:{items:["Wilayah Target","Contoh Lahan"],label:"Data Peta",model:"Wilayah Target"},maps:{accessToken:"",mapStyle:"",model:null,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',center:[113.9213,-.7893],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",legends:{model:""},listMarker:[],loading:{show:!1,text:"Loading..."},zoom:3,geojson:{},key:9292183,layerId:0,hoveredStateId:0,layerStyle:{outline:{color:"#000000"},fill:{color:"#f06800"}},popup:{model:!1,content:{title:"",description:""}}}}),watch:{"map_type.model":{async handler(t){"Wilayah Target"==t&&await this.initializeMapPolygon(),"Contoh Lahan"==t&&await this.initializeMapLahan()}}},async mounted(){this.maps.accessToken=this.$store.state.maps.accessToken,this.maps.mapStyle=this.$store.state.maps.mapStyle,await this.initializeMapPolygon()},methods:{errorResponse(t){console.log(t),t.response&&(t.response.status?401==t.response.status?(localStorage.removeItem("token"),this.$router.push("/")):l.a.fire({title:"Error!",text:""+t.response.message,icon:"error",confirmButtonColor:"#f44336"}):l.a.fire({title:"Error!",text:""+t.message,icon:"error",confirmButtonColor:"#f44336"}))},async initializeMapPolygon(){try{const e=this.maps;if(e.loading.show=!0,mapboxgl.accessToken=e.accessToken,mapboxgl.supported()){{e.loading.show=!0;const a=e.layerStyle,o=this._utils.generateRandomString(5)+Date.now();let i=e.layerId,s=this.maps.hoveredStateId;a.fill.color=this._utils.getRandomColor(),e.loading.text="Getting polygon data...";var t=await omnivore.kml(this.$store.state.apiUrlImage+"maps/testing/Unit_Management.kml").on("ready",(async function(){const n=await t.toGeoJSON();if(await n.features.map((t,e)=>{t.id=i+=1}),0===n.features.length)e.loading.show=await!1,await l.a.fire({title:"Error!",text:"Polygon Features is 0.",icon:"error",confirmButtonColor:"#f44336"});else{e.loading.text="Initialize map...";let t=await new mapboxgl.Map({container:"DashboardMapboxContainer",style:e.mapStyle,center:e.center,zoom:e.zoom,projection:"globe"});await t.scrollZoom.disable(),await t.dragRotate.disable(),await t.touchZoomRotate.disableRotation(),await t.addControl(new mapboxgl.FullscreenControl),await t.on("load",(async function(){await t.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),await t.addControl(new mapboxgl.NavigationControl),await t.addSource(o,{type:"geojson",data:n}),await t.addLayer({id:o+"-fills",type:"fill",source:o,layout:{},paint:{"fill-color":a.fill.color,"fill-opacity":["case",["boolean",["feature-state","hover"],!1],.1,.5]}}),await t.addLayer({id:o+"-outline",type:"line",source:o,layout:{},paint:{"line-color":a.outline.color,"line-width":2}});var e=turf.center(n);const i=e.geometry.coordinates;await t.flyTo({center:[i[0],i[1]],zoom:9,duration:7e3});const r=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1});t.on("mousemove",o+"-fills",e=>{const a=e.lngLat;if(e.features.length>0&&(null!==s&&t.setFeatureState({source:o,id:s},{hover:!1}),s=e.features[0].id,t.setFeatureState({source:o,id:s},{hover:!0}),s)){t.getCanvas().style.cursor="pointer",t.getCanvas().style.cursor="pointer";const o=[a.lng,a.lat],i=e.features[0].properties.name;while(Math.abs(e.lngLat.lng-o[0])>180)o[0]+=e.lngLat.lng>o[0]?360:-360;r.setLngLat(o).setHTML(i).addTo(t)}}),t.on("mouseleave",o+"-fills",()=>{null!==s&&t.setFeatureState({source:o,id:s},{hover:!1}),s=null,t.getCanvas().style.cursor="",r.remove()})}))}}))}}else l.a.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"})}catch(e){this.errorResponse(e)}finally{this.maps.loading.show=!1}},async initializeMapLahan(){try{let t=this._utils,e=this.maps;e.loading.show=!0,e.loading.text="Mengambil data lahan...";const a=await n.a.get(this.$store.getters.getApiUrl("GetLahanAllAdmin?program_year=2022&typegetdata=all"),this.$store.state.apiConfig);let o=a.data.data.result.data;const i=Math.floor(Math.random()*(o.length-50));if(o=o.slice(i,i+50).map(t=>({...t,long:t.location.split(" ")[1],lat:t.location.split(" ")[0]})),console.log(o),mapboxgl.accessToken=e.accessToken,mapboxgl.supported()){{e.loading.show=!0;const a=e.layerStyle;this._utils.generateRandomString(5),Date.now();a.fill.color=this._utils.getRandomColor(),e.loading.text="Getting polygon data...",e.loading.text="Initialize map...";let i=await new mapboxgl.Map({container:"DashboardMapboxContainer",style:e.mapStyle,center:e.center,zoom:e.zoom,projection:"globe"});await i.scrollZoom.disable(),await i.doubleClickZoom.disable(),await i.dragRotate.disable(),await i.touchZoomRotate.disableRotation(),await i.addControl(new mapboxgl.FullscreenControl),await i.on("load",(async function(){await i.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),await i.addControl(new mapboxgl.NavigationControl),e.loading.show=await!1;let a=[];for(let e=0;e<o.length;e++){const s=[o[e].long,o[e].lat],n=`\n                            <table>\n                                <tr>\n                                    <td>Desa</td>\n                                    <td>:</td>\n                                    <td>${o[e].desa||"-"}</td>    \n                                </tr>\n                                <tr>\n                                    <td>Petani</td>\n                                    <td>:</td>\n                                    <td>${o[e].petani||"-"}</td>    \n                                </tr>\n                                <tr>\n                                    <td>Luas Lahan</td>\n                                    <td>:</td>\n                                    <td>${t.numberFormat(o[e].luas_lahan)} m<sup>2</sup></td>    \n                                </tr>\n                                <tr>\n                                    <td>Tipe Lahan</td>\n                                    <td>:</td>\n                                    <td>${o[e].lahan_type||"-"}</td>    \n                                </tr>\n                            </table>`;a[e]=(new mapboxgl.Marker).setLngLat(s).setPopup((new mapboxgl.Popup).setHTML(n)).addTo(i),a[e].getElement().addEventListener("dblclick",()=>{i.flyTo({center:s,zoom:15,duration:3e3})})}})),await i.flyTo({center:[108.909203,-7.143859],zoom:6,duration:7e3})}}else l.a.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"})}catch(t){this.map_type.model="Wilayah Target",this.errorResponse(t)}finally{this.maps.loading.show=!1}}}},c=d,p=a("2877"),h=a("6544"),u=a.n(h),m=a("c6a6"),g=a("4ca6"),f=a("b0af"),b=a("99d9"),y=a("ce7e"),v=a("132d"),w=a("a797"),x=a("490a"),C=Object(p["a"])(c,o,i,!1,null,null,null);e["default"]=C.exports;u()(C,{VAutocomplete:m["a"],VBadge:g["a"],VCard:f["a"],VCardText:b["c"],VDivider:y["a"],VIcon:v["a"],VOverlay:w["a"],VProgressCircular:x["a"]})},f40d:function(t,e,a){"use strict";var o=a("2b0e");e["a"]=o["default"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},ff44:function(t,e,a){}}]);
//# sourceMappingURL=chunk-231caa6c.120eee65.js.map