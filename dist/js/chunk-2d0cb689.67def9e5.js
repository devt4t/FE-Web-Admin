(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cb689"],{"4a17":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"500","content-class":"rounded-xl",persistent:"",scrollable:""},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[n("v-card",[n("v-card-title",{staticClass:"headermodalstyle"},[e._v(" Change FC "),n("v-divider",{staticClass:"mx-2",attrs:{color:"white"}}),n("v-icon",{attrs:{color:"red"},on:{click:function(t){e.isShow=!1}}},[e._v("mdi-close-circle")])],1),n("v-card-text",[n("v-overlay",{attrs:{absolute:"",value:e.isLoading}},[n("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),n("p",{staticClass:"mt-2 mb-0"},[e._v(e._s(e.isLoadingText))])],1),n("v-autocomplete",{staticClass:"mt-2",attrs:{color:"green","item-color":"green",rounded:"",outlined:"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},"hide-details":"",label:"Unit Manager","item-text":"name","item-value":"nik",items:e.UM.items,loading:e.UM.loading,disabled:"IT"!=e.$store.state.User.role_group},on:{change:function(t){return e.getOptions("FC",t)}},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}}),n("v-list-item-subtitle",[e._v(e._s(t.item.nik))])],1)]}}]),model:{value:e.UM.model,callback:function(t){e.$set(e.UM,"model",t)},expression:"UM.model"}}),n("v-autocomplete",{staticClass:"mt-3",attrs:{color:"green","item-color":"green",rounded:"",outlined:"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},"hide-details":"",label:"Field Facilitator","item-text":"name","item-value":"nik",items:e.FC.items,loading:e.FC.loading},scopedSlots:e._u([{key:"item",fn:function(t){return[n("v-list-item-content",[n("v-list-item-title",{domProps:{innerHTML:e._s(t.item.name)}}),n("v-list-item-subtitle",[e._v(e._s(t.item.nik))])],1)]}}]),model:{value:e.FC.model,callback:function(t){e.$set(e.FC,"model",t)},expression:"FC.model"}})],1),n("v-card-actions",[n("v-divider",{staticClass:"mr-2"}),n("v-btn",{staticClass:"px-5",attrs:{color:"green white--text",rounded:"",disabled:!e.FC.model||!e.ff_no},on:{click:e.save}},[n("v-icon",{staticClass:"mr-1"},[e._v("mdi-content-save-check")]),e._v(" Save")],1)],1)],1)],1)],1)},i=[],s=n("1da1"),o=(n("96cf"),n("a9e3"),n("bc3a")),r=n.n(o),l={props:{show:{type:Boolean,default:!1},id:{type:String|Number,default:""}},data:function(){return{isLoading:!1,isLoadingText:"Loading...",ff_no:"",UM:{items:[],loading:!1,model:""},FC:{items:[],loading:!1,model:""}}},computed:{isShow:{get:function(){return this.show},set:function(e){0==e&&this.resetData(),this.$emit("dialogAct",{name:"changeFF",status:e})}}},watch:{id:{handler:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=9;break}if(t.isLoading=!0,0!=t.UM.items.length){n.next=6;break}return t.isLoadingText="Get List UM data...",n.next=6,t.getOptions("UM");case 6:return n.next=8,t.getDetail(e);case 8:t.isLoading=!1;case 9:case"end":return n.stop()}}),n)})))()}}},methods:{getDetail:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.isLoadingText="Get FF data...",n.next=4,r.a.get(t.$store.getters.getApiUrl("GetFieldFacilitatorDetail?id=".concat(e)),t.$store.state.apiConfig);case 4:return a=n.sent,i=a.data.data.result,t.isLoadingText="Get FC data...",n.next=9,r.a.get(t.$store.getters.getApiUrl("GetEmployeeAll?name=".concat(i.fc_name,"&position=19")),t.$store.state.apiConfig);case 9:if(s=n.sent,o=s.data.data.result.data,!(o.length>0)){n.next=17;break}return t.ff_no=i.ff_no,t.UM.model=o[0].manager_code,n.next=16,t.getOptions("FC",t.UM.model);case 16:t.FC.model=i.fc_no;case 17:n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](0),t.$emit("showSnackbar",{text:n.t0.message,color:"red"}),void 0!=n.t0.response?t.sessionEnd(n.t0):console.error(n.t0);case 23:return n.prev=23,t.isLoadingText="Loading...",n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[0,19,23,26]])})))()},getOptions:function(e){var t=arguments,n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:null,a.prev=1,n[e].loading=!0,n[e].model="",s="","UM"==e?s="GetEmployeeAll?position_no=20":"FC"==e&&(s="GetEmployeebyManager?position=19&manager_code=".concat(i)),a.next=8,r.a.get(n.$store.getters.getApiUrl(s),n.$store.state.apiConfig);case 8:return o=a.sent,l=o.data.data,a.next=12,l.result.data;case 12:n[e].items=a.sent,a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](1),n.$emit("showSnackbar",{text:a.t0.message,color:"red"}),void 0!=a.t0.response?n.sessionEnd(a.t0):console.error(a.t0);case 19:return a.prev=19,n[e].loading=!1,a.finish(19);case 22:case"end":return a.stop()}}),a,null,[[1,15,19,22]])})))()},resetData:function(){this.ff_no="",this.FC.items=[],this.FC.model="",this.UM.items=[],this.UM.model=""},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,e.isLoadingText="Changing FC...",t.next=5,r.a.post(e.$store.getters.getApiUrl("ChangeFCFieldFacilitator"),{ff_no:e.ff_no,fc_no:e.FC.model},e.$store.state.apiConfig);case 5:n=t.sent,console.log(n),e.$emit("refreshTable"),e.$emit("showSnackbar",{text:n.data,color:200==n.status?"green":"red"}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$emit("showSnackbar",{text:t.t0.message,color:"red"}),void 0!=t.t0.response?e.sessionEnd(t.t0):console.error(t.t0);case 15:return t.prev=15,e.isLoading=!1,e.isShow=!1,t.finish(15);case 19:case"end":return t.stop()}}),t,null,[[0,11,15,19]])})))()},sessionEnd:function(e){"undefined"!=typeof e.response.status&&401==e.response.status&&(localStorage.removeItem("token"),this.$router.push("/"))}}},c=l,d=n("2877"),u=n("6544"),m=n.n(u),g=n("c6a6"),p=n("8336"),v=n("b0af"),f=n("99d9"),h=n("169a"),x=n("ce7e"),b=n("132d"),C=n("5d23"),w=n("a797"),k=n("490a"),_=Object(d["a"])(c,a,i,!1,null,null,null);t["default"]=_.exports;m()(_,{VAutocomplete:g["a"],VBtn:p["a"],VCard:v["a"],VCardActions:f["a"],VCardText:f["c"],VCardTitle:f["d"],VDialog:h["a"],VDivider:x["a"],VIcon:b["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VListItemTitle:C["c"],VOverlay:w["a"],VProgressCircular:k["a"]})}}]);
//# sourceMappingURL=chunk-2d0cb689.67def9e5.js.map