(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2290e0"],{dc8c:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"content-class":"rounded-xl mx-1","max-width":"1200px",scrollable:"",persistent:""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("v-card",[a("v-card-title",{staticClass:"mb-1 green darken-1 rounded-xl pa-2 pr-3 ma-1"},[a("span",{staticClass:"white--text"},[a("v-btn",{staticClass:"white dark--text mr-1",attrs:{fab:"","x-small":""}},[a("v-icon",{attrs:{color:"grey darken-3"}},[t._v("mdi-file-account")])],1),t._v(" Export Excel")],1),a("v-icon",{staticClass:"ml-auto",attrs:{color:"white lighten-1"},on:{click:function(e){t.showModal=!1}}},[t._v("mdi-close-circle")])],1),a("v-card-text",[a("v-overlay",{staticClass:"rounded-xl",attrs:{absolute:"",value:t.loading.show}},[a("div",{staticClass:"d-flex flex-column justify-center align-center"},[a("LottieAnimation",{ref:"anim",staticStyle:{height:"64px"},attrs:{animationData:t.lottie.data.loading,loop:!0}}),a("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(t.loading.text)+" "),a("v-progress-circular",{attrs:{size:17,width:3,indeterminate:"",color:"white"}})],1),a("v-progress-linear",{attrs:{color:"blue-grey",height:"25"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.value;return[a("strong",[t._v(t._s(Math.ceil(l))+"%")])]}}]),model:{value:t.loading.progress,callback:function(e){t.$set(t.loading,"progress",e)},expression:"loading.progress"}})],1)]),a("table",{staticStyle:{"border-collapse":"collapse","min-height":"400px"},attrs:{id:"tableForExport"}},[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"},attrs:{colspan:"8"}},[t._v(t._s(t.download.title))])]),a("tr",[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"8"}},[t._v("Tahun Program: "+t._s(t.programYear))])]),a("tr",[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"8"}},[t._v("Export Time: "+t._s(Date()))])]),a("tr",[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"8"}},[t._v("Total Data: "+t._s(t.table.data.length))])]),a("tr"),a("tr",[a("th",[t._v("No")]),t._l(t.table.fields,(function(e,l){return a("th",{key:"headerTbl-"+l},[t._v(" "+t._s(e.label)+" ")])}))],2)]),a("tbody",t._l(t.table.data,(function(e,l){return a("tr",{key:"table-row-"+l},[a("td",[t._v(t._s(l+1))]),t._l(t.table.fields,(function(l,r){return a("td",{key:"itemTbl-"+r},[t._v(" "+t._s(e[l.key])+" ")])}))],2)})),0)])],1),a("v-card-actions",[a("v-btn",{staticClass:"my-4",attrs:{rounded:"",outlined:"",disabled:t.loading.show,color:"green",block:""},on:{click:function(e){return t.downloadExcel()}}},[a("v-icon",{staticClass:"mr-1 "},[t._v("mdi-microsoft-excel")]),t._v(" Download Excel ")],1)],1)],1)],1)},r=[],n=a("2909"),o=a("1da1"),s=(a("d81d"),a("fb6a"),a("96cf"),a("bc3a")),i=a.n(s),c=a("86e6"),d=a("1d71"),u={name:"OldGekoExport",props:{show:{type:Boolean,default:!1},programYear:{type:String,default:""},defaultData:{type:Array,default:[]}},components:{LottieAnimation:c["a"]},data:function(){return{download:{title:"Export Lahan"},loading:{progress:0,show:!1,text:""},lottie:{data:{loading:d}},table:{fields:[{label:"Management Unit",key:"mu_name"},{label:"Unit Manager",key:"um_name"},{label:"Target Area",key:"ta_name"},{label:"Field Coordinator",key:"fc_name"},{label:"Field Facilitator",key:"ff_name"},{label:"Desa",key:"village_name"},{label:"Petani",key:"farmer_name"},{label:"Status Petani",key:"farmer_status"},{label:"Jenis Bibit",key:"seeds_name"},{label:"Kayu",key:"total_wood"},{label:"Mpts",key:"total_mpts"},{label:"Total",key:"total_wood_mpts"},{label:"Status Lahan",key:"land_status"}],data:[],trees:[]}}},computed:{showModal:{get:function(){return this.show},set:function(t){0==t&&this.$emit("close")}}},watch:{show:{handler:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t&&e.getTableData();case 1:case"end":return a.stop()}}),a)})))()}}},mounted:function(){},methods:{downloadExcel:function(){var t=document.getElementById("tableForExport"),e=XLSX.utils.table_to_book(t);XLSX.writeFile(e,"".concat(this.download.title,".xlsx"))},getTableData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,l,r,o,s,c,d,u,p,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,a=t.loading,t.table.data=[],a.show=!0,a.text="Preparing data...",a.progress=0,l=t.$store,r=t.defaultData.map((function(t){return t.kode})),console.log(t.defaultData),o=100,s=Math.ceil(r.length/o),console.log(s),c=0;case 13:if(!(c<s)){e.next=24;break}return u=JSON.parse(JSON.stringify(r)).slice(c*o,(c+1)*o),p=l.getters.getApiUrl("ExportFarmerAllAdminNew"),e.next=18,i.a.post(p,{program_year:t.programYear,farmer_no:u},l.state.apiConfig);case 18:g=e.sent,(d=t.table.data).push.apply(d,Object(n["a"])(g.data)),a.progress=Math.round(100/s*(c+1));case 21:c++,e.next=13;break;case 24:return e.prev=24,t.table.data.length>0&&t.downloadExcel(),t.loading.show=!1,t.loading.progress=100,e.finish(24);case 29:case"end":return e.stop()}}),e,null,[[0,,24,29]])})))()}}},p=u,g=a("2877"),m=a("6544"),f=a.n(m),b=a("8336"),h=a("b0af"),_=a("99d9"),v=a("169a"),x=a("132d"),w=a("a797"),y=a("490a"),k=a("8e36"),C=Object(g["a"])(p,l,r,!1,null,null,null);e["default"]=C.exports;f()(C,{VBtn:b["a"],VCard:h["a"],VCardActions:_["a"],VCardText:_["c"],VCardTitle:_["d"],VDialog:v["a"],VIcon:x["a"],VOverlay:w["a"],VProgressCircular:y["a"],VProgressLinear:k["a"]})}}]);
//# sourceMappingURL=chunk-2d2290e0.8ba2cc57.js.map