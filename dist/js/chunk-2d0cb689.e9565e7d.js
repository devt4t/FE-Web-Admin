(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cb689"],{"4a17":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("v-dialog",{attrs:{"max-width":"500","content-class":"rounded-xl",persistent:"",scrollable:""},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[e("v-card",[e("v-card-title",{staticClass:"headermodalstyle"},[t._v(" Change FC "),e("v-divider",{staticClass:"mx-2",attrs:{color:"white"}}),e("v-icon",{attrs:{color:"red"},on:{click:function(e){t.isShow=!1}}},[t._v("mdi-close-circle")])],1),e("v-card-text",[e("v-overlay",{attrs:{absolute:"",value:t.isLoading}},[e("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),e("p",{staticClass:"mt-2 mb-0"},[t._v(t._s(t.isLoadingText))])],1),e("v-autocomplete",{staticClass:"mt-2",attrs:{color:"green","item-color":"green",rounded:"",outlined:"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},"hide-details":"",label:"Unit Manager","item-text":"name","item-value":"nik",items:t.UM.items,loading:t.UM.loading,disabled:"IT"!=t.$store.state.User.role_group},on:{change:function(e){return t.getOptions("FC",e)}},scopedSlots:t._u([{key:"item",fn:function(i){return[e("v-list-item-content",[e("v-list-item-title",{domProps:{innerHTML:t._s(i.item.name)}}),e("v-list-item-subtitle",[t._v(t._s(i.item.nik))])],1)]}}]),model:{value:t.UM.model,callback:function(e){t.$set(t.UM,"model",e)},expression:"UM.model"}}),e("v-autocomplete",{staticClass:"mt-3",attrs:{color:"green","item-color":"green",rounded:"",outlined:"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},"hide-details":"",label:"Field Facilitator","item-text":"name","item-value":"nik",items:t.FC.items,loading:t.FC.loading},scopedSlots:t._u([{key:"item",fn:function(i){return[e("v-list-item-content",[e("v-list-item-title",{domProps:{innerHTML:t._s(i.item.name)}}),e("v-list-item-subtitle",[t._v(t._s(i.item.nik))])],1)]}}]),model:{value:t.FC.model,callback:function(e){t.$set(t.FC,"model",e)},expression:"FC.model"}})],1),e("v-card-actions",[e("v-divider",{staticClass:"mr-2"}),e("v-btn",{staticClass:"px-5",attrs:{color:"green white--text",rounded:"",disabled:!t.FC.model||!t.ff_no},on:{click:t.save}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-content-save-check")]),t._v(" Save")],1)],1)],1)],1)],1)},a=[],o=i("bc3a"),n=i.n(o),l={props:{show:{type:Boolean,default:!1},id:{type:String|Number,default:""}},data:()=>({isLoading:!1,isLoadingText:"Loading...",ff_no:"",UM:{items:[],loading:!1,model:""},FC:{items:[],loading:!1,model:""}}),computed:{isShow:{get:function(){return this.show},set:function(t){0==t&&this.resetData(),this.$emit("dialogAct",{name:"changeFF",status:t})}}},watch:{id:{async handler(t){t&&(this.isLoading=!0,0==this.UM.items.length&&(this.isLoadingText="Get List UM data...",await this.getOptions("UM")),await this.getDetail(t),this.isLoading=!1)}}},methods:{async getDetail(t){try{this.isLoadingText="Get FF data...";const e=await n.a.get(this.$store.getters.getApiUrl("GetFieldFacilitatorDetail?id="+t),this.$store.state.apiConfig),i=e.data.data.result;this.isLoadingText="Get FC data...";const s=await n.a.get(this.$store.getters.getApiUrl(`GetEmployeeAll?name=${i.fc_name}&position=19`),this.$store.state.apiConfig),a=s.data.data.result.data;a.length>0&&(this.ff_no=i.ff_no,this.UM.model=a[0].manager_code,await this.getOptions("FC",this.UM.model),this.FC.model=i.fc_no)}catch(e){this.$emit("showSnackbar",{text:e.message,color:"red"}),void 0!=e.response?this.sessionEnd(e):console.error(e)}finally{this.isLoadingText="Loading..."}},async getOptions(t,e=null){try{this[t].loading=!0,this[t].model="";let i="";"UM"==t?i="GetEmployeeAll?position_no=20":"FC"==t&&(i="GetEmployeebyManager?position=19&manager_code="+e);const s=await n.a.get(this.$store.getters.getApiUrl(i),this.$store.state.apiConfig),a=s.data.data;this[t].items=await a.result.data}catch(i){this.$emit("showSnackbar",{text:i.message,color:"red"}),void 0!=i.response?this.sessionEnd(i):console.error(i)}finally{this[t].loading=!1}},resetData(){this.ff_no="",this.FC.items=[],this.FC.model="",this.UM.items=[],this.UM.model=""},async save(){try{this.isLoading=!0,this.isLoadingText="Changing FC...";const t=await n.a.post(this.$store.getters.getApiUrl("ChangeFCFieldFacilitator"),{ff_no:this.ff_no,fc_no:this.FC.model},this.$store.state.apiConfig);console.log(t),this.$emit("refreshTable"),this.$emit("showSnackbar",{text:t.data,color:200==t.status?"green":"red"})}catch(t){this.$emit("showSnackbar",{text:t.message,color:"red"}),void 0!=t.response?this.sessionEnd(t):console.error(t)}finally{this.isLoading=!1,this.isShow=!1}},sessionEnd(t){"undefined"!=typeof t.response.status&&401==t.response.status&&(localStorage.removeItem("token"),this.$router.push("/"))}}},r=l,d=i("2877"),c=i("6544"),m=i.n(c),h=i("c6a6"),g=i("8336"),u=i("b0af"),p=i("99d9"),f=i("169a"),v=i("ce7e"),C=i("132d"),w=i("5d23"),b=i("a797"),_=i("490a"),F=Object(d["a"])(r,s,a,!1,null,null,null);e["default"]=F.exports;m()(F,{VAutocomplete:h["a"],VBtn:g["a"],VCard:u["a"],VCardActions:p["a"],VCardText:p["c"],VCardTitle:p["d"],VDialog:f["a"],VDivider:v["a"],VIcon:C["a"],VListItemContent:w["a"],VListItemSubtitle:w["b"],VListItemTitle:w["c"],VOverlay:b["a"],VProgressCircular:_["a"]})}}]);
//# sourceMappingURL=chunk-2d0cb689.e9565e7d.js.map