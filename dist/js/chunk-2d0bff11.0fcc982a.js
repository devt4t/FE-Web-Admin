(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bff11"],{4054:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t._self._c;return a("div",[a("v-dialog",{attrs:{"content-class":"rounded-xl mx-1","max-width":"700",scrollable:"",persistent:""},model:{value:t.showModalPickCoordinate,callback:function(a){t.showModalPickCoordinate=a},expression:"showModalPickCoordinate"}},[a("v-card",[a("v-card-title",{staticClass:"rounded-xl green darken-3 ma-1 pa-2"},[a("span",{staticClass:"white--text"},[a("v-btn",{staticClass:"white dark--text mr-1",attrs:{fab:"","x-small":""}},[a("v-icon",{attrs:{color:"grey darken-3"}},[t._v("mdi-map-marker")])],1),t._v(" Ambil Koordinat Lokasi Habitat")],1),a("v-icon",{staticClass:"ml-auto",attrs:{color:"white"},on:{click:function(a){t.showModalPickCoordinate=!1}}},[t._v("mdi-close-circle")])],1),a("v-card-text",{staticClass:"pa-2"},[t.showModalPickCoordinate?a("div",{staticStyle:{position:"relative"}},[t.maps.loading.show?a("v-overlay",{staticClass:"rounded-xl",attrs:{absolute:"","justify-center":"","align-center":""}},[a("div",{staticClass:"d-flex flex-column align-center justify-center"},[a("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),a("p",{staticClass:"mb-0 text-center mt-4"},[t._v(t._s(t.maps.loading.text||"Loading..."))])],1)]):t._e(),a("div",{key:"maps-pick-coordinat-habitat-location-"+t.showModalPickCoordinate,ref:"mapbox-pick-coordinate-habitat-location",staticClass:"rounded-xl overflow-hidden",staticStyle:{height:"400px",width:"100%"},attrs:{id:"mapboxPickCoordinateHabitatLocation"}})],1):t._e(),a("v-text-field",{staticClass:"mt-3",attrs:{color:"green",dense:"",outlined:"",rounded:"",value:t.getLongLatData,disabled:t.maps.loading.show,label:"Koordinat Distribusi (Long, Lat)",rules:[t=>!!t||"Field is required"],"hide-details":"",readonly:!0}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:this.maps.loading.show,rounded:"",outlined:"",color:"green"},on:{click:function(a){return t.saveCoordinate()}}},[a("v-icon",[t._v("mdi-map-marker-check")]),t._v(" Simpan Titik Lokasi")],1)],1)],1)],1)],1)},i=[],n={props:{show:{type:Boolean,default:!1},data:{type:Object,default:null}},data:()=>({maps:{accessToken:"",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',center:[113.9213,-.7893],geojson:{},hoveredStateId:0,key:111,layerId:0,layerStyle:{outline:{color:"#000000"},fill:{color:"#f06800"}},legends:{model:""},listMarker:[],loading:{show:!1,text:"Loading..."},location:{lng:"",lat:""},mapStyle:"",model:null,popup:{model:!1,content:{title:"",description:""}},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:3}}),methods:{async initializeMaps(){try{let t=this.maps;t.loading.show=!0,t.loading.text="Initialize maps...",t.accessToken=this.$store.state.maps.accessToken,mapboxgl.accessToken=t.accessToken;const a=this.data.model,o=/^[-+]?\d+(\.\d+)?,\s*[-+]?\d+(\.\d+)?$/,e=o.test(a);if(a&&e){const o=a.split(", ")[0],e=a.split(", ")[1];t.center=[o,e]}else t.center=[113.9213,-.7893];if(mapboxgl.supported()){let o=await new mapboxgl.Map({container:"mapboxPickCoordinateHabitatLocation",style:"mapbox://styles/mapbox/satellite-streets-v11",center:t.center,zoom:t.zoom,projection:"globe"});const e=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0});await o.on("load",(async function(){await o.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),o.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl})),await o.addControl(new mapboxgl.FullscreenControl),await o.addControl(new mapboxgl.NavigationControl),await o.addControl(e),t.location={lng:t.center[0],lat:t.center[1]};const i=new mapboxgl.Marker({draggable:!0}).setLngLat(t.center).addTo(o);function n(){const a=i.getLngLat();t.location=a}o.on("click",t=>{i.setLngLat(t.lngLat),n()}),i.on("drag",n),e.on("trackuserlocationstart",()=>{t.loading.show=!0,t.loading.text="Mencari lokasi anda..."}),e.on("geolocate",(async function(a){const o=[a.coords.longitude,a.coords.latitude];await i.setLngLat(o),await n(),t.loading.show=!1,t.loading.text="Loading..."})),a&&await o.flyTo({center:t.center,zoom:15,duration:4e3}),t.loading.show=!1}))}else Swal.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"})}catch(t){console.log(t)}},async saveCoordinate(){const t=this.maps.location;this.$emit("action",{type:"save",name:"pick_coordinate",data:this.data,coordinate:t})}},computed:{showModalPickCoordinate:{get:function(){return this.show&&(this.maps.loading.show=!0,setTimeout(()=>{this.initializeMaps()},200)),this.show},set:function(t){t||this.$emit("action",{type:"close",name:"pick_coordinate"})}},getLongLatData(){const t=this.maps;return`${t.location.lng}, ${t.location.lat}`}},mounted(){}},s=n,l=o("2877"),r=o("6544"),c=o.n(r),d=o("8336"),p=o("b0af"),g=o("99d9"),m=o("169a"),u=o("132d"),h=o("a797"),w=o("490a"),b=o("8654"),k=Object(l["a"])(s,e,i,!1,null,null,null);a["default"]=k.exports;c()(k,{VBtn:d["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VDialog:m["a"],VIcon:u["a"],VOverlay:h["a"],VProgressCircular:w["a"],VTextField:b["a"]})}}]);
//# sourceMappingURL=chunk-2d0bff11.0fcc982a.js.map