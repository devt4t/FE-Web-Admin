(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cb0fe35a","chunk-31138cd6"],{"2bc5":function(e,t,a){"use strict";a("abd3");var s=a("1c87"),r=a("58df"),i=Object(r["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(e){const{tag:t,data:a}=this.generateRouteLink();return e("li",[e(t,{...a,attrs:{...a.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}}),n=a("80d2"),o=Object(n["i"])("v-breadcrumbs__divider","li"),l=a("7560");t["a"]=Object(r["a"])(l["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(o,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const e=[],t=!!this.$scopedSlots.item,a=[];for(let s=0;s<this.items.length;s++){const r=this.items[s];a.push(r.text),t?e.push(this.$scopedSlots.item({item:r})):e.push(this.$createElement(i,{key:a.join("."),props:r},[r.text])),s<this.items.length-1&&e.push(this.genDivider())}return e}},render(e){const t=this.$slots.default||this.genItems();return e("ul",{staticClass:"v-breadcrumbs",class:this.classes},t)}})},8945:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{"data-aos":"fade-right"}},[t("v-breadcrumbs",{staticClass:"breadcrumbsmain",attrs:{dark:"dark"==e.$store.state.theme,items:[{text:"Activities",disabled:!0,href:"breadcrumbs_dashboard"},{text:"Distribusi",disabled:!0,href:"Distribusi"},{text:"Seedling Change Request",disabled:!0,href:"breadcrumbs_link_1"}],divider:">",large:""}})],1)])},r=[],i={data:()=>({})},n=i,o=a("2877"),l=a("6544"),c=a.n(l),d=a("2bc5"),u=Object(o["a"])(n,s,r,!1,null,null,null);t["default"]=u.exports;c()(u,{VBreadcrumbs:d["a"]})},abd3:function(e,t,a){},dec9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("breadcrumbs"),t("createDialog",{attrs:{show:e.dialogs.create.show,programYear:e.programYear,landProgram:e.landProgram.model},on:{close:t=>e.closeDialogs(t)}}),t("detailDialog",{attrs:{show:e.dialogs.detail.show,landProgram:e.landProgram.model,id:e.dialogs.detail.id,settings:e.settings},on:{close:t=>e.closeDialogs(t)}}),t("v-data-table",{staticClass:"mx-3 rounded-xl",attrs:{"data-aos":"fade-up","data-aos-delay":"300",headers:e.table.headers[e.landProgram.model],items:e.table.items,loading:e.table.loading,search:e.table.search},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-row",{staticClass:"align-center justify-center pa-2 pt-3 mx-0"},[t("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.$store.state.programYear.options,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:"Program Year",disabled:e.table.loading},model:{value:e.programYear,callback:function(t){e.programYear=t},expression:"programYear"}}),t("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.landProgram.items,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:e.landProgram.label,disabled:e.table.loading},model:{value:e.landProgram.model,callback:function(t){e.$set(e.landProgram,"model",t)},expression:"landProgram.model"}}),e.nursery.show?t("v-select",{staticClass:"mx-auto mx-lg-2 mr-lg-1 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:e.nursery.items,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:"Nursery",disabled:e.table.loading||e.nursery.disabled},model:{value:e.nursery.model,callback:function(t){e.$set(e.nursery,"model",t)},expression:"nursery.model"}}):e._e(),t("v-spacer",{staticClass:"d-none d-lg-inline-block"}),t("v-text-field",{staticClass:"mr-2",staticStyle:{"max-width":"300px"},attrs:{color:"success","item-color":"success","append-icon":"mdi-magnify",outlined:"",dense:"",rounded:"",label:"Search","hide-details":"",disabled:e.table.loading},model:{value:e.table.search,callback:function(t){e.$set(e.table,"search",t)},expression:"table.search"}}),t("v-btn",{attrs:{rounded:"",small:"",color:"orange white--text my-1",disabled:e.disabledCreateRequestButton},on:{click:()=>e.dialogs.create.show=!0}},[t("v-icon",{staticClass:"mr-1"},[e._v("mdi-chat-plus")]),e._v(" Add New Request")],1)],1)]},proxy:!0},{key:"item.request_no",fn:function({item:a}){return[t("v-tooltip",{attrs:{right:"","content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:r}){return[t("v-chip",e._g(e._b({staticStyle:{"text-transform":"uppercase"},attrs:{color:e.statusColorAndIcon(a.status,"color","request")},on:{click:()=>e.initialize()}},"v-chip",r,!1),s),[t("v-icon",{staticClass:"mr-1"},[e._v(e._s(e.statusColorAndIcon(a.status,"icon","request")))]),e._v(" "+e._s(a.request_no)+" ")],1)]}}],null,!0)},[e._v(" Requested By: "+e._s(a.created_by)+" ")])]}},{key:"item.lahan_no",fn:function({item:a}){return[e.lahanNoFormat(a.lahan_no).length<2?t("v-chip",{staticClass:"green white--text ma-1"},[e._v(" "+e._s(e.lahanNoFormat(a.lahan_no)[0])+" ")]):t("v-menu",{attrs:{"open-on-hover":"","offset-x":"","close-on-content-click":!1,"content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function({attrs:s,on:r}){return[t("v-btn",e._g(e._b({attrs:{rounded:"",small:"",color:`green darken-${e.lahanNoFormat(a.lahan_no).length-1<5?e.lahanNoFormat(a.lahan_no).length-1:4} white--text`}},"v-btn",s,!1),r),[e._v(" "+e._s(e.lahanNoFormat(a.lahan_no).length)+" Lahan ")])]}}],null,!0)},[t("v-card",{staticClass:"pa-2 pb-1 d-flex flex-column"},e._l(e.lahanNoFormat(a.lahan_no),(function(a,s){return t("v-chip",{key:s,staticClass:"mb-1",staticStyle:{cursor:"auto"},attrs:{color:"green white--text"}},[e._v(" "+e._s(a)+" ")])})),1)],1)]}},{key:"item.verification",fn:function({item:a}){return[t("v-chip",{staticClass:"pl-1",staticStyle:{"text-transform":"uppercase"},attrs:{color:e.statusColorAndIcon(a.verification,"color","verification",a.status)}},[t("v-icon",{staticClass:"mr-1"},[e._v(e._s(e.statusColorAndIcon(a.verification,"icon","verification",a.status)))]),e._v(" "+e._s(e.statusColorAndIcon(a.verification,"text","verification",a.status))+" ")],1)]}},{key:"item.actions",fn:function({item:a}){return[t("v-menu",{attrs:{"content-class":"rounded-xl"},scopedSlots:e._u([{key:"activator",fn:function({attrs:a,on:s}){return[t("v-btn",e._g(e._b({attrs:{small:"",fab:"",icon:""}},"v-btn",a,!1),s),[t("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t("v-card",{staticClass:"pa-2 d-flex align-stretch flex-column justify-center"},[t("v-btn",{staticClass:"pl-1 d-flex justify-start align-center",attrs:{color:"info white--text",rounded:"",small:""},on:{click:()=>{e.showDetailDialog(a)}}},[t("v-icon",{staticClass:"mr-1"},[e._v("mdi-information")]),e._v(" Detail ")],1)],1)],1)]}}])}),t("v-snackbar",{staticClass:"d-flex",attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout,rounded:"xl"},model:{value:e.snackbar.show,callback:function(t){e.$set(e.snackbar,"show",t)},expression:"snackbar.show"}},[t("div",{staticClass:"d-flex justify-between"},[t("p",{staticClass:"mb-0"},[e._v(" "+e._s(e.snackbar.text)+" ")]),t("v-spacer"),t("v-icon",{staticClass:"pl-1",attrs:{small:""},on:{click:()=>e.snackbar.show=!1}},[e._v("mdi-close-circle")])],1)])],1)},r=[],i=a("bc3a"),n=a.n(i),o=a("8945"),l=a("fb04"),c=a("afd4"),d={components:{breadcrumbs:o["default"],createDialog:l["default"],detailDialog:c["default"]},data:()=>({landProgram:{label:"Land Program",items:["Petani","Umum"],model:"Petani"},nursery:{disabled:!1,model:"All",items:["All","Arjasari","Ciminyak","Kebumen","Pati"],show:!0},programYear:"",dialogs:{create:{show:!1},detail:{id:"",show:!1}},table:{headers:{Petani:[{text:"Request No",value:"request_no"},{text:"Nursery",value:"nursery"},{text:"Management Unit",value:"mu_name"},{text:"FF",value:"ff_name"},{text:"Farmer",value:"farmer_name"},{text:"Lahan No",value:"lahan_no"},{text:"Status",value:"verification"},{text:"Actions",value:"actions",align:"right"}],Umum:[{text:"Request No",value:"request_no"},{text:"Nursery",value:"nursery"},{text:"Management Unit",value:"mu_name"},{text:"PIC T4T",value:"pic_t4t_name"},{text:"PIC Lahan",value:"pic_lahan"},{text:"Lahan No",value:"lahan_no"},{text:"Status",value:"verification"},{text:"Actions",value:"actions",align:"right"}]},items:[],loading:!1,search:""},settings:{prefixUrl:"SeedlingChangeRequest/",apiConfig:{}},snackbar:{color:"green",timeout:5e3,show:!1,text:"Alert!",multiLine:!1},User:{}}),watch:{"landProgram.model":{async handler(){await this.initialize()}},"nursery.model":{async handler(){const e=this.$store.state.User;await this.initialize(),"IT"!=e.role_group&&"REGIONAL MANAGER"!=e.role_name&&"PROGRAM MANAGER"!=e.role_name||(this.nursery.disabled=!1)}}},computed:{disabledCreateRequestButton(){let e=!1,t=this.User;if("NURSERY MANAGER"==t.role_name)e=!1;else{const a=this.$store.state.nurseryTeam.emails.Kebumen,s=this.$store.state.nurseryTeam.emails.Pati,r=[...a,...s,"rizki.pradhitya@trees4trees.org","um_pati@t4t.org"];e=!r.includes(t.email)}return"IT"==t.role_group&&(e=!1),e}},async mounted(){this.programYear=this.$store.state.programYear.model,this.settings.apiConfig=this.$store.state.apiConfig,await this.initialize(),"IT"!=this.User.role_group&&"um_pati@t4t.org"!=this.User.email&&(this.$store.state.maintenanceOverlay=!1)},destroyed(){this.$store.state.maintenanceOverlay=!1,this.$store.state.loadingOverlay=!1,this.$store.state.loadingOverlayText=null},methods:{async initialize(){this.User=this.$store.state.User,await this.setNurserySite(),await this.getRequests()},async getRequests(){try{this.table.loading=!0,this.table.items=[];const e=this.User,t=new URLSearchParams({land_program:this.landProgram.model,program_year:this.programYear,nursery:this.nursery.model,ff:e.ff.ff.toString()});if("Umum"==this.landProgram.model){const a=e.role_name,s=e.role_group,r=["PROGRAM MANAGER","REGIONAL MANAGER","NURSERY MANAGER"];"IT"!=s&&0==r.includes(a)&&(t.delete("ff"),t.set("created_by",e.email))}const a=this.$store.getters.getApiUrl(`${this.settings.prefixUrl}GetRequests?${t}`),s=this.$store.state.apiConfig,r=await n.a.get(a,s).then(e=>e.data);this.table.items=r.list}catch(e){this.sessionEnd(e),console.log(e)}finally{this.table.loading=!1}},async showDetailDialog(e){this.dialogs.detail.id=e.request_no,this.dialogs.detail.show=!0},async closeDialogs(e){this.dialogs[e.name].show=!1,e.snackbar&&(this.snackbar={...e.snackbar},"green"==e.snackbar.color&&this.initialize())},lahanNoFormat(e){return e.replace("[","").replace("]","").split(",")},sessionEnd(e){e.response&&"undefined"!=typeof e.response.status&&(401==e.response.status?(localStorage.removeItem("token"),this.$router.push("/")):400==e.response.status&&(this.snackbar.text=e.response.data,this.snackbar.color="red",this.snackbar.show=!0))},statusColorAndIcon(e,t,a,s=null){let r="";if("request"==a)return"color"==t?(r="requested"==e?"orange":"rejected"==e||"canceled"==e?"red":"green",r+" white--text"):(r="requested"==e?"chat-processing":"rejected"==e||"canceled"==e?"chat-remove":"check-decagram","mdi-"+r);if("color"==t)return 0==e?r="red":1==e?r="orange":2==e?r="yellow darken-2":3==e&&(r="green"),"rejected"!=s&&"canceled"!=s||(r="red"),r+" white--text";if("icon"==t)return 0==e?r="progress-alert":1==e?r="progress-check":2==e?r="check-circle":3==e&&(r="checkbox-multiple-marked-circle"),"rejected"!=s&&"canceled"!=s||(r="close-circle"),"mdi-"+r;{const t=this.landProgram.model;return 0==e?r="UNVERIFIED":1==e?r="VERIFIED "+("Petani"==t?"FC":"PIC T4T"):2==e?r="VERIFIED UM":3==e&&(r="VERIFIED RM / PM"),"rejected"==s?r="REJECTED":"canceled"==s&&(r="CANCELED"),r}},async setNurserySite(){const e=this.$store.state.nurseryTeam.emails.Arjasari,t=this.$store.state.nurseryTeam.emails.Ciminyak,a=[...this.$store.state.nurseryTeam.emails.Kebumen,"rizki.pradhitya@trees4trees.org"],s=[...this.$store.state.nurseryTeam.emails.Pati,"um_pati@t4t.org"],r=this.$store.state.User,i=r.email;let n=this.nursery.model;e.includes(i)?n="Arjasari":t.includes(i)?n="Ciminyak":a.includes(i)?n="Kebumen":s.includes(i)&&(n="Pati"),"NURSERY MANAGER"==r.role_name&&(this.nursery.disabled=!0),"IT"!=r.role_group&&"REGIONAL MANAGER"!=r.role_name&&"PROGRAM MANAGER"!=r.role_name&&(this.nursery.show=!1),this.nursery.model=n}}},u=d,m=a("2877"),h=a("6544"),g=a.n(h),b=a("8336"),p=a("b0af"),v=a("cc20"),f=a("8fea"),_=a("132d"),y=a("e449"),x=a("0fd9"),k=a("b974"),C=a("2db4"),w=a("2fa4"),A=a("8654"),R=a("3a2f"),$=Object(m["a"])(u,s,r,!1,null,null,null);t["default"]=$.exports;g()($,{VBtn:b["a"],VCard:p["a"],VChip:v["a"],VDataTable:f["a"],VIcon:_["a"],VMenu:y["a"],VRow:x["a"],VSelect:k["a"],VSnackbar:C["a"],VSpacer:w["a"],VTextField:A["a"],VTooltip:R["a"]})}}]);
//# sourceMappingURL=chunk-cb0fe35a.4d44d50a.js.map