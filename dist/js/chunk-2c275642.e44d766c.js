(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c275642"],{"2bc5":function(t,e,a){"use strict";a("abd3");var s=a("1c87"),i=a("58df"),r=Object(i["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(t){const{tag:e,data:a}=this.generateRouteLink();return t("li",[t(e,{...a,attrs:{...a.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}}),o=a("80d2"),n=Object(o["i"])("v-breadcrumbs__divider","li"),l=a("7560");e["a"]=Object(i["a"])(l["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(n,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const t=[],e=!!this.$scopedSlots.item,a=[];for(let s=0;s<this.items.length;s++){const i=this.items[s];a.push(i.text),e?t.push(this.$scopedSlots.item({item:i})):t.push(this.$createElement(r,{key:a.join("."),props:i},[i.text])),s<this.items.length-1&&t.push(this.genDivider())}return t}},render(t){const e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},abd3:function(t,e,a){},e07d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("v-breadcrumbs",{staticClass:"breadcrumbsmain",attrs:{dark:"dark"==t.$store.state.theme,"data-aos":"fade-right",items:t.breadcrumbs,divider:">",large:""}}),e("FormModal",{key:t.modals.form.key,attrs:{show:t.modals.form.show,id:t.modals.form.data,programYear:t.localConfig.programYear},on:{action:e=>t.modalActions(e),swal:e=>t.swalActions(e)}}),e("DetailModal",{key:t.modals.detail.key,attrs:{show:t.modals.detail.show,id:t.modals.detail.data,programYear:t.localConfig.programYear},on:{action:e=>t.modalActions(e),swal:e=>t.swalActions(e)}}),e("v-data-table",{class:(t.$store.state.theme,"")+" rounded-xl elevation-6 mx-3 pa-1",attrs:{"data-aos":"fade-up","data-aos-delay":"200","multi-sort":"",headers:t.table.headers,items:t.table.items,search:t.table.search,loading:t.table.loading.show,"loading-text":t.table.loading.text,"footer-props":{itemsPerPageText:"Jumlah Data Per Halaman",itemsPerPageOptions:[10,25,40,-1],showCurrentPage:!0,showFirstLastPage:!0}},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-row",{staticClass:"my-2 mx-2 mx-lg-3 align-center"},[e("v-text-field",{staticClass:"mx-auto mb-2 mb-lg-0",attrs:{color:"green","hide-details":"",dense:"",outlined:"",rounded:"",label:"Pencarian",placeholder:"Start type to search...","append-icon":"mdi-magnify"},model:{value:t.table.search,callback:function(e){t.$set(t.table,"search",e)},expression:"table.search"}}),e("v-divider",{staticClass:"mx-2 d-none d-lg-block"}),e("div",{staticClass:"mx-auto"},[e("v-btn",{staticClass:"mr-2",attrs:{color:"green white--text",disabled:t.table.loading.show||0==t.table.items.length,rounded:"",disabled:""},on:{click:()=>t.exportExcel()}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-microsoft-excel")]),t._v(" Export ")],1),e("v-btn",{staticClass:"pl-2",attrs:{color:"info",rounded:""},on:{click:()=>{t.modals.form.show=!0,t.modals.form.key+=1}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-plus-circle")]),t._v(" Tambah ")],1)],1)],1)]},proxy:!0},{key:"item.no",fn:function({index:e}){return[t._v(" "+t._s(e+1)+" ")]}},{key:"item.land_area",fn:function({item:e}){return[t._v(" "+t._s(t._utils.numberFormat(e.land_area))+" Ha ")]}},{key:"item.start_scooping_date",fn:function({item:a}){return[t._v(" "+t._s(t._utils.dateFormat(a.start_scooping_date,"DD MMMM Y"))+" "),a.start_scooping_date!=a.end_scooping_date?e("span",[t._v(" ~ "+t._s(t._utils.dateFormat(a.end_scooping_date,"DD MMMM Y"))+" ")]):t._e()]}},{key:"item.potential_dusun",fn:function({item:e}){return[t._v(" "+t._s(t._utils.numberFormat(e.potential_dusun))+" Dusun ")]}},{key:"item.status",fn:function({item:a}){return[e("v-chip",{staticClass:"white--text",attrs:{color:t.getStatusColumn("bg_color",a.status)}},[e("v-icon",{staticClass:"mr-1"},[t._v(t._s(t.getStatusColumn("icon",a.status)))]),t._v(" "+t._s(t.getStatusColumn("text",a.status))+" ")],1)]}},{key:"item.actions",fn:function({item:a}){return[e("v-menu",{attrs:{"content-class":"rounded-xl"},scopedSlots:t._u([{key:"activator",fn:function({attrs:a,on:s}){return[e("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",a,!1),s),[e("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e("v-card",{staticClass:"pa-2 d-flex align-stretch flex-column justify-center"},[e("v-btn",{staticClass:"pl-1 d-flex justify-start align-center",attrs:{color:"info white--text",rounded:"",small:""},on:{click:function(e){return t.showModal("detail",a)}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-information")]),t._v(" Detail ")],1),e("v-btn",{staticClass:"pl-1 mt-1 d-flex justify-start align-center",attrs:{color:"orange white--text",rounded:"",small:"",disabled:"submit_review"==a.status&&"GIS STAFF"!=t.user.role_name},on:{click:()=>{t.showModal("form",a)}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-pencil-circle")]),t._v(" Edit ")],1)],1)],1)]}}])})],1)},i=[],r=a("b277"),o=a("90b4"),n=a("bc3a"),l=a.n(n),d=a("3d20"),c=a.n(d),m={components:{FormModal:r["default"],DetailModal:o["default"]},data:()=>({breadcrumbs:[{text:"Activities",disabled:!0,href:"breadcrumbs_dashboard"},{text:"Scooping Visit",disabled:!0,href:"breadcrumbs_link_1"}],localConfig:{programYear:""},modals:{form:{show:!1,data:null,key:29291},detail:{show:!1,data:null,key:89238292}},table:{headers:[{text:"No",value:"no"},{text:"Form No",value:"data_no"},{text:"Desa",value:"village_name"},{text:"Luas Desa",value:"land_area"},{text:"Tanggal",value:"start_scooping_date"},{text:"Potensi",value:"potential_dusun",align:"center"},{text:"PIC",value:"pic_name"},{text:"PIC Manager",value:"pic_manager"},{text:"Status",value:"status",align:"center"},{text:"Actions",value:"actions",align:"right"}],items:[],loading:{show:!1,text:"Loading..."},search:""},user:""}),mounted(){this.firstAccessPage()},methods:{errorResponse(t){console.log(t),t.response&&t.response.status&&401==t.response.status&&(localStorage.removeItem("token"),this.$router.push("/"))},async firstAccessPage(){this.user=this.$store.state.User,this.localConfig.programYear=this.$store.state.programYear.model,await this.getTableData()},getStatusColumn(t,e){if("bg_color"==t){if("document_saving"==e)return"blue darken-1";if("ready_to_submit"==e)return"orange";if("submit_review"==e)return"green darken-1"}if("icon"==t){if("document_saving"==e)return"mdi-content-save";if("ready_to_submit"==e)return"mdi-content-save-check";if("submit_review"==e)return"mdi-check-circle"}if("text"==t){if("document_saving"==e)return"Disimpan";if("ready_to_submit"==e)return"Menunggu Verifikasi";if("submit_review"==e)return"Terverifikasi"}return""},async getTableData(){try{this.table.loading.show=!0;const t=this.$store.state.User,e=[];if(["UNIT MANAGER","FIELD COORDINATOR"].includes(t.role_name)&&(e.push(t.email),"UNIT MANAGER"==t.role_name)){const a=await l.a.get(this.$store.getters.getApiUrl("GetEmployeebyManager?position_no=19&manager_code="+t.employee_no),this.$store.state.apiConfig);a.data.data.result.data.map(t=>{e.push(t.email)})}let a=this.$store.getters.getApiUrl("GetScoopingAll?user_id="+e.toString());const s=await l.a.get(a,this.$store.state.apiConfig);this.table.items=s.data.data.result}catch(t){this.table.items=[],this.errorResponse(t)}finally{this.table.loading.show=!1}},modalActions(t){"close"==t.type?(this.modals[t.name].show=!1,this.modals[t.name].data=null):"refresh-table"==t.type&&this.getTableData()},async showModal(t,e){this.modals[t].data=await e.data_no,this.modals[t].show=await!0},swalActions(t){this.getTableData();const e=c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,showCloseButton:!0,timer:1e4,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",c.a.stopTimer),t.addEventListener("mouseleave",c.a.resumeTimer)}});e.fire({icon:t.type,title:t.message})}}},u=m,h=a("2877"),g=a("6544"),b=a.n(g),p=a("2bc5"),v=a("8336"),f=a("b0af"),_=a("cc20"),x=a("8fea"),w=a("ce7e"),y=a("132d"),C=a("e449"),k=a("0fd9"),D=a("8654"),A=Object(h["a"])(u,s,i,!1,null,null,null);e["default"]=A.exports;b()(A,{VBreadcrumbs:p["a"],VBtn:v["a"],VCard:f["a"],VChip:_["a"],VDataTable:x["a"],VDivider:w["a"],VIcon:y["a"],VMenu:C["a"],VRow:k["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=chunk-2c275642.e44d766c.js.map