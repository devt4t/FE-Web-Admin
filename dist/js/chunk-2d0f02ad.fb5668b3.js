(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f02ad"],{"9ae4":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",[a("f-f-detail",{attrs:{show:t.dialogs.ff_detail.show,data:t.dialogs.ff_detail.data},on:{dialogActions:a=>t.dialogActions(a)}}),a("v-dialog",{attrs:{scrollable:"","max-width":"1100px",transition:"dialog-transition","content-class":"rounded-xl"},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[a("v-card",[a("v-card-title",{staticClass:"rounded-xl green darken-3 ma-1 pa-2 white--text"},[a("v-icon",{staticClass:"mx-2",attrs:{color:"white"}},[t._v("mdi-account-details")]),t._v(" Field Coordinator "),a("v-icon",{staticClass:"ml-auto",attrs:{color:"white"},on:{click:function(a){t.showModal=!1}}},[t._v("mdi-close-circle")])],1),a("v-card-text",[a("v-row",{staticClass:"align-center ma-0 my-2"},[t._v(" UM: "+t._s(t.data&&t.data.umName||"-")+" "),a("v-divider",{staticClass:"mx-2"}),a("v-select",{staticClass:"mt-2 mr-1",staticStyle:{"max-width":"175px"},attrs:{dense:"",color:"success","item-color":"success","menu-props":{rounded:"xl",offsetY:!0,transition:"slide-y-transition"},"hide-details":"",rounded:"",disabled:t.table.loading.show,items:t.$store.state.programYear.options,label:"Program Year",rules:[t=>!!t||"Field is required"],outlined:""},model:{value:t.options.programYear,callback:function(a){t.$set(t.options,"programYear",a)},expression:"options.programYear"}})],1),t.tableItems?a("v-data-table",{staticClass:"elevation-1 rounded-xl",staticStyle:{position:"relative"},attrs:{headers:t.table.headers,items:t.table.items,loading:t.table.loading.show,"loading-text":t.table.loading.text,search:t.table.loading.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-overlay",{attrs:{absolute:"",color:"white",value:t.table.loading.show}},[a("div",{staticClass:"d-flex flex-column justify-center align-center"},[a("v-progress-circular",{attrs:{size:80,width:10,indeterminate:"",color:"green"}}),a("p",{staticClass:"mt-2 mb-0 green--text text--darken-2"},[t._v(t._s(t.table.loading.text))])],1)])]},proxy:!0},{key:"item.index",fn:function({index:e}){return[a("div",[t._v(" "+t._s(e+1)+" ")])]}},{key:"item.action",fn:function({index:e,item:o}){return[a("v-btn",{staticClass:"pl-1",attrs:{small:"",rounded:"",color:"green white--text"},on:{click:function(a){return t.dialogActions(!0,o)}}},[a("v-icon",{staticClass:"mr-1"},[t._v("mdi-information")]),t._v(" Detail ")],1)]}}],null,!1,1230711933)}):t._e()],1)],1)],1)],1)},s=[],i=e("bc3a"),r=e.n(i),l=(e("c1df"),e("3d20")),n=e.n(l),d=e("6635"),c={name:"OldGEKOFCDetail",components:{FFDetail:d["default"]},props:{show:{type:Boolean,default:!1},data:{type:Object,default:null}},data:()=>({dialogs:{ff_detail:{show:!1,data:null}},options:{programYear:""},table:{headers:[{text:"No",value:"index",width:75},{text:"ID Karyawan (GEKO)",value:"nik"},{text:"Nama FC",value:"name"},{text:"Email",value:"email"},{text:"NIK / No KTP",value:"ktp_no"},{text:"Total FF",value:"total_ff"},{text:"",value:"action"}],items:[],loading:{show:!1,text:"Loading..."},search:""}}),computed:{showModal:{get:function(){return this.show&&this.data.umNo&&this.data.programYear&&(this.options.programYear=this.data.programYear),this.show},set:function(t){t||this.$emit("dialogActions",!1)}},tableItems(){return this.show&&this.data.umNo&&this.options.programYear&&this.getTableData({program_year:this.options.programYear,manager_code:this.data.umNo,position:19}),!0}},mounted(){},methods:{async errorResponse(t){if(console.log(t),t.response&&t.response.status){if(401==t.response.status){const t=await n.a.fire({title:"Session Ended!",text:"Please login again.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});t&&(localStorage.removeItem("token"),this.$router.push("/"))}if(500===t.response.status||400===t.response.status){let a=t.response.data.message;a&&a.includes("Duplicate entry")&&(a="Data sudah ada!"),n.a.fire({title:"Error!",text:""+(a||t.message),icon:"error",confirmButtonColor:"#f44336"})}}},async dialogActions(t,a=null){this.User;a&&(this.dialogs.ff_detail.data={fcNo:a.nik,fcName:a.name,programYear:this.options.programYear}),this.dialogs.ff_detail.show=t},async getTableData(t){try{this.table.loading.show=!0,this.table.loading.text="Mengambil data...";const a=new URLSearchParams(t),e="GetEmployeebyManager?"+a,o=await r.a.get(this.$store.getters.getApiUrl(e),this.$store.state.apiConfig),s=o.data.data.result.data;if(this.table.items=[],s.length>0){s.sort((t,a)=>t.name.localeCompare(a.name)),this.table.loading.text="Mengambil data FC 0 / "+s.length;for(const[a,e]of Object.entries(s)){const o=new URLSearchParams({program_year:t.program_year,fc_no:e.nik}),i=await r.a.get(this.$store.getters.getApiUrl("Dashboard/DetailFieldFacilitator?"+o),this.$store.state.apiConfig);e.total_ff=i.data.length,this.table.items.push(e),this.table.loading.text=`Mengambil data FC ${parseInt(a)+1} / ${s.length}`}}}catch(a){this.errorResponse(a)}finally{this.table.loading.show=!1}}}},m=c,u=e("2877"),h=e("6544"),g=e.n(h),p=e("8336"),f=e("b0af"),v=e("99d9"),b=e("8fea"),w=e("169a"),x=e("ce7e"),_=e("132d"),y=e("a797"),C=e("490a"),k=e("0fd9"),Y=e("b974"),D=Object(u["a"])(m,o,s,!1,null,null,null);a["default"]=D.exports;g()(D,{VBtn:p["a"],VCard:f["a"],VCardText:v["c"],VCardTitle:v["d"],VDataTable:b["a"],VDialog:w["a"],VDivider:x["a"],VIcon:_["a"],VOverlay:y["a"],VProgressCircular:C["a"],VRow:k["a"],VSelect:Y["a"]})}}]);
//# sourceMappingURL=chunk-2d0f02ad.fb5668b3.js.map