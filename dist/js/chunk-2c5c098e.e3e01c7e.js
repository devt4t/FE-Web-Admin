(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c5c098e"],{"2bc5":function(t,e,a){"use strict";a("abd3");var s=a("1c87"),o=a("58df"),i=Object(o["a"])(s["a"]).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(t){const{tag:e,data:a}=this.generateRouteLink();return t("li",[t(e,{...a,attrs:{...a.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}}),r=a("80d2"),l=Object(r["i"])("v-breadcrumbs__divider","li"),n=a("7560");e["a"]=Object(o["a"])(n["a"]).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(l,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const t=[],e=!!this.$scopedSlots.item,a=[];for(let s=0;s<this.items.length;s++){const o=this.items[s];a.push(o.text),e?t.push(this.$scopedSlots.item({item:o})):t.push(this.$createElement(i,{key:a.join("."),props:o},[o.text])),s<this.items.length-1&&t.push(this.genDivider())}return t}},render(t){const e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},abd3:function(t,e,a){},c48e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("v-breadcrumbs",{staticClass:"breadcrumbsmain",attrs:{dark:"dark"==t.$store.state.theme,"data-aos":"fade-right",items:t.breadcrumbs,divider:">",large:""}}),e("FormModal",{key:t.modals.form.key,attrs:{show:t.modals.form.show,status:t.modals.form.status,id:t.modals.form.id,form_no:t.modals.form.form_no,programYear:t.localConfig.programYear},on:{action:e=>t.modalActions(e),swal:e=>t.swalActions(e)}}),e("DetailModal",{key:t.modals.detail.key,attrs:{show:t.modals.detail.show,id:t.modals.detail.data,form_no:t.modals.detail.form_no,programYear:t.localConfig.programYear},on:{action:e=>t.modalActions(e),swal:e=>t.swalActions(e)}}),e("v-data-table",{class:(t.$store.state.theme,"")+" rounded-xl elevation-6 mx-3 pa-1",attrs:{"data-aos":"fade-up","data-aos-delay":"200","multi-sort":"",headers:t.table.headers,items:t.table.items,search:t.table.search,loading:t.table.loading.show,"loading-text":t.table.loading.text,"footer-props":{itemsPerPageText:"Jumlah Data Per Halaman",itemsPerPageOptions:[10,25,40,-1],showCurrentPage:!0,showFirstLastPage:!0}},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-row",{staticClass:"my-2 mx-2 mx-lg-3 align-center"},[e("v-select",{staticClass:"mx-auto mr-lg-2 mb-2 mb-lg-0",staticStyle:{"max-width":"200px"},attrs:{color:"success","item-color":"success",items:t.$store.state.programYear.options,disabled:t.table.loading.show,outlined:"",dense:"","hide-details":"","menu-props":{bottom:!0,offsetY:!0,rounded:"xl",transition:"slide-y-transition"},rounded:"",label:"Tahun Program"},model:{value:t.localConfig.programYear,callback:function(e){t.$set(t.localConfig,"programYear",e)},expression:"localConfig.programYear"}}),e("v-text-field",{staticClass:"mx-auto mb-2 mb-lg-0",attrs:{color:"green","hide-details":"",dense:"",outlined:"",rounded:"",label:"Pencarian",placeholder:"Start type to search...","append-icon":"mdi-magnify"},model:{value:t.table.search,callback:function(e){t.$set(t.table,"search",e)},expression:"table.search"}}),e("v-divider",{staticClass:"mx-2 d-none d-lg-block"}),e("div",{staticClass:"mx-auto"},[e("v-btn",{staticClass:"mr-2",attrs:{color:"green white--text",disabled:t.table.loading.show||0==t.table.items.length,rounded:""},on:{click:()=>t.exportExcel()}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-microsoft-excel")]),t._v(" Export ")],1),e("v-btn",{staticClass:"pl-2",attrs:{color:"info",rounded:""},on:{click:()=>{t.modals.form.show=!0,t.modals.form.key+=1,t.modals.form.status="add"}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-plus-circle")]),t._v(" Tambah Data ")],1)],1)],1)]},proxy:!0},{key:"item.no",fn:function({index:e}){return[t._v(" "+t._s(e+1)+" ")]}},{key:"item.total_farmer",fn:function({item:e}){return[t._v(" "+t._s(e.total_farmer)+" Peserta ")]}},{key:"item.is_verified",fn:function({item:a}){return[1==a.is_verified?e("v-chip",{staticClass:"font-weight-bold",attrs:{color:"success","text-color":"white",small:""}},[t._v(" Terverifikasi ")]):e("v-chip",{staticClass:"font-weight-bold",attrs:{color:"error","text-color":"white",small:""}},[t._v(" Belum Terverifikasi ")])]}},{key:"item.actions",fn:function({item:a}){return[e("v-menu",{attrs:{"content-class":"rounded-xl"},scopedSlots:t._u([{key:"activator",fn:function({attrs:a,on:s}){return[e("v-btn",t._g(t._b({attrs:{small:"",fab:"",icon:""}},"v-btn",a,!1),s),[e("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e("v-card",{staticClass:"pa-2 d-flex align-stretch flex-column justify-center"},[e("v-btn",{staticClass:"pl-1 d-flex justify-start align-center",attrs:{color:"info white--text",rounded:"",small:""},on:{click:()=>t.showModal("detail",a)}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-information")]),t._v(" Detail ")],1),e("v-btn",{staticClass:"pl-1 mt-1 d-flex justify-start align-center",attrs:{color:"orange white--text",rounded:"",small:"",disabled:1===a.is_verified},on:{click:()=>{t.showModal("form",a)}}},[e("v-icon",{staticClass:"mr-1"},[t._v("mdi-pencil-circle")]),t._v(" Edit ")],1)],1)],1)]}}])})],1)},o=[],i=a("bc3a"),r=a.n(i),l=a("3d20"),n=a.n(l),d=a("e868"),c=a("f9e9"),m={components:{FormModal:d["default"],DetailModal:c["default"]},data:()=>({breadcrumbs:[{text:"Activities",disabled:!0,href:"breadcrumbs_dashboard"},{text:"Sosialisasi Program",disabled:!0,href:"breadcrumbs_link_1"}],localConfig:{programYear:""},modals:{detail:{show:!1,data:null,key:65324312,form_no:null},form:{status:"add",show:!1,data:null,key:29291,form_no:null,id:null}},table:{headers:[{text:"No",value:"no"},{text:"Form No",value:"form_no"},{text:"Tanggal",value:"form_date"},{text:"Desa",value:"namaDesa"},{text:"Total Peserta",value:"total_farmer"},{text:"PIC",value:"pic_name"},{text:"PIC Manager",value:"pic_manager"},{text:"Status Verifikasi",value:"is_verified",align:"center"},{text:"Actions",value:"actions",align:"right"}],items:[],loading:{show:!1,text:"Loading..."},search:""},user:""}),watch:{"localConfig.programYear":{handler(){this.getTableData()}}},mounted(){this.firstAccessPage()},methods:{async errorResponse(t){if(console.log(t),t.response&&t.response.status){if(401==t.response.status){const t=await n.a.fire({title:"Session Ended!",text:"Please login again.",icon:"warning",confirmButtonColor:"#2e7d32",confirmButtonText:"Okay"});t&&(localStorage.removeItem("token"),this.$router.push("/"))}if(500===t.response.status||400===t.response.status){let e=t.response.data.message;e&&e.includes("Duplicate entry")&&(e="Data sudah ada!"),n.a.fire({title:"Error!",text:""+(e||t.message),icon:"error",confirmButtonColor:"#f44336"})}}},async firstAccessPage(){this.user=this.$store.state.User,this.localConfig.programYear=this.$store.state.programYear.model,await this.getTableData()},async getTableData(){try{this.table.loading.show=!0;const t=this.$store.state.User,e=[];if(["UNIT MANAGER","FIELD COORDINATOR"].includes(t.role_name)&&(e.push(t.email),"UNIT MANAGER"==t.role_name)){const a=await r.a.get(this.$store.getters.getApiUrl("GetEmployeebyManager?position_no=19&manager_code="+t.employee_no),this.$store.state.apiConfig);a.data.data.result.data.map(t=>{e.push(t.email)})}let a=this.$store.getters.getApiUrl(`GetFormMinatAll?program_year=${this.localConfig.programYear}&user_id=${e.toString()}`);const s=await r.a.get(a,this.$store.state.apiConfig);this.table.items=s.data.data.result.data}catch(t){this.table.items=[],this.errorResponse(t)}finally{this.table.loading.show=!1}},modalActions(t){"close"==t.type&&(this.modals[t.name].show=!1)},async showModal(t,e){this.modals[t].form_no=await e.form_no,this.modals[t].status="edit",this.modals[t].dataForm=await e,this.modals[t].show=await!0},swalActions(t){this.getTableData();const e=n.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,showCloseButton:!0,timer:1e4,timerProgressBar:!0,didOpen:t=>{t.addEventListener("mouseenter",n.a.stopTimer),t.addEventListener("mouseleave",n.a.resumeTimer)}});e.fire({icon:t.type,title:t.message})}}},u=m,h=a("2877"),f=a("6544"),g=a.n(f),p=a("2bc5"),b=a("8336"),v=a("b0af"),_=a("cc20"),x=a("8fea"),w=a("ce7e"),y=a("132d"),C=a("e449"),k=a("0fd9"),$=a("b974"),A=a("8654"),D=Object(h["a"])(u,s,o,!1,null,null,null);e["default"]=D.exports;g()(D,{VBreadcrumbs:p["a"],VBtn:b["a"],VCard:v["a"],VChip:_["a"],VDataTable:x["a"],VDivider:w["a"],VIcon:y["a"],VMenu:C["a"],VRow:k["a"],VSelect:$["a"],VTextField:A["a"]})}}]);
//# sourceMappingURL=chunk-2c5c098e.e3e01c7e.js.map