(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20738a"],{a038:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"d-flex align-center mb-2"},[a("p",{staticClass:"mb-0"},[a("v-icon",[t._v("mdi-map-marker")]),t._v(" Lokasi Lahan")],1),a("v-divider",{staticClass:"ml-2"})],1),a("v-card",{staticClass:"rounded-xl elevation-0 overflow-hidden mb-4",staticStyle:{width:"100%"}},[a("v-card-text",{staticClass:"pa-0",staticStyle:{position:"relative",width:"100%"}},[t.maps.loading.show?a("v-overlay",{attrs:{absolute:"","justify-center":"","align-center":""}},[a("div",{staticClass:"d-flex flex-column align-center justify-center"},[a("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),a("p",{staticClass:"mb-0 text-center mt-4"},[t._v(t._s(t.maps.loading.text||"Loading..."))])],1)]):t._e(),a("div",{staticClass:"overflow-hidden rounded-xl",staticStyle:{position:"relative",width:"100%"},attrs:{id:"mapboxWrapper","data-aos":"fade-down"}},[a("div",{key:this.section+t.maps.key,ref:this.section+"mapbox",staticClass:"rounded-xl overflow-hidden",staticStyle:{height:"300px",width:"100%!important"},attrs:{id:"LahanDetailMapboxContainer"+this.section}})])],1)],1)],1)},n=[],i=e("bc3a"),r=e.n(i),s=e("3d20"),l=e.n(s),d={props:{section:{type:String},long:{type:String,default:null},lat:{type:String,default:null},lahanNo:{type:String,default:null}},data:()=>({maps:{accessToken:"",mapStyle:"",model:null,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',center:[113.9213,-.7893],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",legends:{model:""},listMarker:[],loading:{show:!1,text:"Loading..."},zoom:3,geojson:{},key:9292183,layerId:0,hoveredStateId:0,layerStyle:{outline:{color:"#000000"},fill:{color:"#f06800"}},popup:{model:!1,content:{title:"",description:""}}}}),async mounted(){this.maps.loading.show=!0,this.maps.accessToken=this.$store.state.maps.accessToken,this.maps.mapStyle=this.$store.state.maps.mapStyle,this.lahanNo?this.lahanNo.length>0&&await this.initializeMapMultipleMarker(this.lahanNo):await this.initializeMap()},methods:{errorResponse(t){console.log(t),t.response&&(t.response.status?401==t.response.status?(localStorage.removeItem("token"),this.$router.push("/")):l.a.fire({title:"Error!",text:""+t.response.message,icon:"error",confirmButtonColor:"#f44336"}):l.a.fire({title:"Error!",text:""+t.message,icon:"error",confirmButtonColor:"#f44336"}))},async initializeMap(t){try{const t=this.maps,a=[this.long,this.lat];if(mapboxgl.accessToken=t.accessToken,mapboxgl.supported()){if(a){t.loading.show=!0;t.layerId;const e=t.layerStyle;e.fill.color=this._utils.getRandomColor(),t.loading.text="Initialize map...";let o=await new mapboxgl.Map({container:"LahanDetailMapboxContainer"+this.section,style:t.mapStyle,center:t.center,zoom:t.zoom,projection:"globe"});await o.on("load",(async function(){await o.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),await o.addControl(new mapboxgl.FullscreenControl),await o.addControl(new mapboxgl.NavigationControl);(new mapboxgl.Marker).setLngLat(a).addTo(o);await o.flyTo({center:a,zoom:9,duration:7e3}),t.loading.show=!1}))}}else l.a.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"})}catch(a){this.errorResponse(a),this.maps.loading.show=!1}},async initializeMapMultipleMarker(t){try{let a=this.maps,e=this.$store,o=this._utils;if(mapboxgl.accessToken=a.accessToken,mapboxgl.supported()){a.loading.show=!0;a.layerId;const n=a.layerStyle,i=t.split(",");let s=[],l=[];n.fill.color=this._utils.getRandomColor(),a.loading.text="Initialize map...";let d=await new mapboxgl.Map({container:"LahanDetailMapboxContainer"+this.section,style:a.mapStyle,center:a.center,zoom:a.zoom,projection:"globe"});await d.on("load",(async function(){await d.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6}),await d.doubleClickZoom.disable(),await d.addControl(new mapboxgl.FullscreenControl),await d.addControl(new mapboxgl.NavigationControl);for(let a=0;a<i.length;a++){const t=await r.a.get(e.getters.getApiUrl("GetLahanDetail?id=1&lahan_no="+i[a]),e.state.apiConfig),n=t.data.data.result;if(n){const t=[parseFloat(n.longitude),parseFloat(n.latitude)],e=`\n                                    <table>\n                                        <tr>\n                                            <td>Kabupaten</td>\n                                            <td>:</td>\n                                            <td>${n.namaKabupaten||"-"}</td>    \n                                        </tr>\n                                        <tr>\n                                            <td>Kecamatan</td>\n                                            <td>:</td>\n                                            <td>${n.namaKecamatan||"-"}</td>    \n                                        </tr>\n                                        <tr>\n                                            <td>Desa</td>\n                                            <td>:</td>\n                                            <td>${n.namaDesa||"-"}</td>    \n                                        </tr>\n                                        <tr>\n                                            <td>Petani</td>\n                                            <td>:</td>\n                                            <td>${n.namaPetani||"-"}</td>    \n                                        </tr>\n                                        <tr>\n                                            <td>Luas Lahan</td>\n                                            <td>:</td>\n                                            <td>${o.numberFormat(n.land_area)} m<sup>2</sup></td>    \n                                        </tr>\n                                        <tr>\n                                            <td>Tipe Lahan</td>\n                                            <td>:</td>\n                                            <td>${n.lahan_type||"-"}</td>    \n                                        </tr>\n                                    </table>`;s[a]=(new mapboxgl.Marker).setLngLat(t).setPopup((new mapboxgl.Popup).setHTML(e)).addTo(d),s[a].getElement().addEventListener("dblclick",()=>{d.flyTo({center:t,zoom:15,duration:3e3})}),l.push(t)}}console.log(l);var t=turf.points(l),n=turf.center(t);const c=n.geometry.coordinates;await d.flyTo({center:c,zoom:14,duration:3e3}),a.loading.show=!1}))}else l.a.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"})}catch(a){this.errorResponse(a),this.maps.loading.show=!1}}}},c=d,p=e("2877"),m=e("6544"),h=e.n(m),g=e("b0af"),u=e("99d9"),b=e("ce7e"),w=e("132d"),f=e("a797"),y=e("490a"),x=Object(p["a"])(c,o,n,!1,null,null,null);a["default"]=x.exports;h()(x,{VCard:g["a"],VCardText:u["c"],VDivider:b["a"],VIcon:w["a"],VOverlay:f["a"],VProgressCircular:y["a"]})}}]);
//# sourceMappingURL=chunk-2d20738a.5156d405.js.map