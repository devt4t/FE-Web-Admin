(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bff11"],{4054:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{"content-class":"rounded-xl mx-1","max-width":"700",scrollable:"",persistent:""},model:{value:t.showModalPickCoordinate,callback:function(e){t.showModalPickCoordinate=e},expression:"showModalPickCoordinate"}},[a("v-card",[a("v-card-title",{staticClass:"rounded-xl green darken-3 ma-1 pa-2"},[a("span",{staticClass:"white--text"},[a("v-btn",{staticClass:"white dark--text mr-1",attrs:{fab:"","x-small":""}},[a("v-icon",{attrs:{color:"grey darken-3"}},[t._v("mdi-map-marker")])],1),t._v(" Ambil Koordinat Lokasi Habitat")],1),a("v-icon",{staticClass:"ml-auto",attrs:{color:"white"},on:{click:function(e){t.showModalPickCoordinate=!1}}},[t._v("mdi-close-circle")])],1),a("v-card-text",{staticClass:"pa-2"},[t.showModalPickCoordinate?a("div",{staticStyle:{position:"relative"}},[t.maps.loading.show?a("v-overlay",{staticClass:"rounded-xl",attrs:{absolute:"","justify-center":"","align-center":""}},[a("div",{staticClass:"d-flex flex-column align-center justify-center"},[a("v-progress-circular",{attrs:{size:80,width:7,indeterminate:"",color:"white"}}),a("p",{staticClass:"mb-0 text-center mt-4"},[t._v(t._s(t.maps.loading.text||"Loading..."))])],1)]):t._e(),a("div",{key:"maps-pick-coordinat-habitat-location-"+t.showModalPickCoordinate,ref:"mapbox-pick-coordinate-habitat-location",staticClass:"rounded-xl overflow-hidden",staticStyle:{height:"400px",width:"100%"},attrs:{id:"mapboxPickCoordinateHabitatLocation"}})],1):t._e(),a("v-text-field",{staticClass:"mt-3",attrs:{color:"green",dense:"",outlined:"",rounded:"",value:t.getLongLatData,disabled:t.maps.loading.show,label:"Koordinat Distribusi (Long, Lat)",rules:[function(t){return!!t||"Field is required"}],"hide-details":"",readonly:!0}})],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:this.maps.loading.show,rounded:"",outlined:"",color:"green"},on:{click:function(e){return t.saveCoordinate()}}},[a("v-icon",[t._v("mdi-map-marker-check")]),t._v(" Simpan Titik Lokasi")],1)],1)],1)],1)],1)},n=[],r=a("1da1"),i=(a("96cf"),a("ac1f"),a("1276"),a("99af"),{props:{show:{type:Boolean,default:!1},data:{type:Object,default:null}},data:function(){return{maps:{accessToken:"",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a>',center:[113.9213,-.7893],geojson:{},hoveredStateId:0,key:111,layerId:0,layerStyle:{outline:{color:"#000000"},fill:{color:"#f06800"}},legends:{model:""},listMarker:[],loading:{show:!1,text:"Loading..."},location:{lng:"",lat:""},mapStyle:"",model:null,popup:{model:!1,content:{title:"",description:""}},url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoom:3}}},methods:{initializeMaps:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,o,n,i,s,c,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.maps,a.loading.show=!0,a.loading.text="Initialize maps...",a.accessToken=t.$store.state.maps.accessToken,mapboxgl.accessToken=a.accessToken,o=t.data.model,n=/^[-+]?\d+(\.\d+)?,\s*[-+]?\d+(\.\d+)?$/,i=n.test(o),o&&i?(s=o.split(", ")[0],c=o.split(", ")[1],a.center=[s,c]):a.center=[113.9213,-.7893],mapboxgl.supported()){e.next=14;break}Swal.fire({title:"Warning!",text:"Your browser does not support Mapbox GL.",icon:"error",confirmButtonColor:"#f44336"}),e.next=20;break;case 14:return e.next=16,new mapboxgl.Map({container:"mapboxPickCoordinateHabitatLocation",style:"mapbox://styles/mapbox/satellite-streets-v11",center:a.center,zoom:a.zoom,projection:"globe"});case 16:return l=e.sent,d=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),e.next=20,l.on("load",Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(){var t=e.getLngLat();a.location=t},t.next=3,l.setFog({color:"rgb(186, 210, 235)","high-color":"rgb(36, 92, 223)","horizon-blend":.02,"space-color":"rgb(11, 11, 25)","star-intensity":.6});case 3:return l.addControl(new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl})),t.next=6,l.addControl(new mapboxgl.FullscreenControl);case 6:return t.next=8,l.addControl(new mapboxgl.NavigationControl);case 8:return t.next=10,l.addControl(d);case 10:if(a.location={lng:a.center[0],lat:a.center[1]},e=new mapboxgl.Marker({draggable:!0}).setLngLat(a.center).addTo(l),l.on("click",(function(t){e.setLngLat(t.lngLat),n()})),e.on("drag",n),d.on("trackuserlocationstart",(function(){a.loading.show=!0,a.loading.text="Mencari lokasi anda..."})),d.on("geolocate",function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(o){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[o.coords.longitude,o.coords.latitude],t.next=3,e.setLngLat(r);case 3:return t.next=5,n();case 5:a.loading.show=!1,a.loading.text="Loading...";case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),!o){t.next=19;break}return t.next=19,l.flyTo({center:a.center,zoom:15,duration:4e3});case 19:a.loading.show=!1;case 20:case"end":return t.stop()}}),t)}))));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](0),console.log(e.t0);case 25:return e.prev=25,e.finish(25);case 27:case"end":return e.stop()}}),e,null,[[0,22,25,27]])})))()},saveCoordinate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.maps.location,t.$emit("action",{type:"save",name:"pick_coordinate",data:t.data,coordinate:a});case 2:case"end":return e.stop()}}),e)})))()}},computed:{showModalPickCoordinate:{get:function(){var t=this;return this.show&&(this.maps.loading.show=!0,setTimeout((function(){t.initializeMaps()}),200)),this.show},set:function(t){t||this.$emit("action",{type:"close",name:"pick_coordinate"})}},getLongLatData:function(){var t=this.maps;return"".concat(t.location.lng,", ").concat(t.location.lat)}},mounted:function(){}}),s=i,c=a("2877"),l=a("6544"),d=a.n(l),u=a("8336"),p=a("b0af"),g=a("99d9"),m=a("169a"),h=a("132d"),x=a("a797"),b=a("490a"),f=a("8654"),v=Object(c["a"])(s,o,n,!1,null,null,null);e["default"]=v.exports;d()(v,{VBtn:u["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VDialog:m["a"],VIcon:h["a"],VOverlay:x["a"],VProgressCircular:b["a"],VTextField:f["a"]})}}]);
//# sourceMappingURL=chunk-2d0bff11.3f5902db.js.map